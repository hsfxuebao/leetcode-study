<p>åºåˆ—åŒ–æ˜¯å°†ä¸€ä¸ªæ•°æ®ç»“æ„æˆ–è€…å¯¹è±¡è½¬æ¢ä¸ºè¿ç»­çš„æ¯”ç‰¹ä½çš„æ“ä½œï¼Œè¿›è€Œå¯ä»¥å°†è½¬æ¢åçš„æ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªæ–‡ä»¶æˆ–è€…å†…å­˜ä¸­ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥é€šè¿‡ç½‘ç»œä¼ è¾“åˆ°å¦ä¸€ä¸ªè®¡ç®—æœºç¯å¢ƒï¼Œé‡‡å–ç›¸åæ–¹å¼é‡æ„å¾—åˆ°åŸæ•°æ®ã€‚</p>

<p>è¯·è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥å®ç°äºŒå‰æ ‘çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ã€‚è¿™é‡Œä¸é™å®šä½ çš„åºåˆ— / ååºåˆ—åŒ–ç®—æ³•æ‰§è¡Œé€»è¾‘ï¼Œä½ åªéœ€è¦ä¿è¯ä¸€ä¸ªäºŒå‰æ ‘å¯ä»¥è¢«åºåˆ—åŒ–ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²å¹¶ä¸”å°†è¿™ä¸ªå­—ç¬¦ä¸²ååºåˆ—åŒ–ä¸ºåŸå§‹çš„æ ‘ç»“æ„ã€‚</p>

<p><strong>æç¤º: </strong>è¾“å…¥è¾“å‡ºæ ¼å¼ä¸ LeetCode ç›®å‰ä½¿ç”¨çš„æ–¹å¼ä¸€è‡´ï¼Œè¯¦æƒ…è¯·å‚é˜…&nbsp;<a href="/faq/#binary-tree">LeetCode åºåˆ—åŒ–äºŒå‰æ ‘çš„æ ¼å¼</a>ã€‚ä½ å¹¶éå¿…é¡»é‡‡å–è¿™ç§æ–¹å¼ï¼Œä½ ä¹Ÿå¯ä»¥é‡‡ç”¨å…¶ä»–çš„æ–¹æ³•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>

<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p> 
<img alt="" src="https://assets.leetcode.com/uploads/2020/09/15/serdeser.jpg" style="width: 442px; height: 324px;" /> 
<pre>
<strong>è¾“å…¥ï¼š</strong>root = [1,2,3,null,null,4,5]
<strong>è¾“å‡ºï¼š</strong>[1,2,3,null,null,4,5]
</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>root = []
<strong>è¾“å‡ºï¼š</strong>[]
</pre>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>root = [1]
<strong>è¾“å‡ºï¼š</strong>[1]
</pre>

<p><strong>ç¤ºä¾‹ 4ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>root = [1,2]
<strong>è¾“å‡ºï¼š</strong>[1,2]
</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul> 
 <li>æ ‘ä¸­ç»“ç‚¹æ•°åœ¨èŒƒå›´ <code>[0, 10<sup>4</sup>]</code> å†…</li> 
 <li><code>-1000 &lt;= Node.val &lt;= 1000</code></li> 
</ul>

<details><summary><strong>Related Topics</strong></summary>æ ‘ | æ·±åº¦ä¼˜å…ˆæœç´¢ | å¹¿åº¦ä¼˜å…ˆæœç´¢ | è®¾è®¡ | å­—ç¬¦ä¸² | äºŒå‰æ ‘</details><br>

<div>ğŸ‘ 1076, ğŸ‘ 0<span style='float: right;'><span style='color: gray;'><a href='https://github.com/labuladong/fucking-algorithm/discussions/939' target='_blank' style='color: lightgray;text-decoration: underline;'>bug åé¦ˆ</a> | <a href='https://labuladong.gitee.io/article/fname.html?fname=jbæ’ä»¶ç®€ä»‹' target='_blank' style='color: lightgray;text-decoration: underline;'>ä½¿ç”¨æŒ‡å—</a> | <a href='https://labuladong.github.io/algo/images/others/%E5%85%A8%E5%AE%B6%E6%A1%B6.jpg' target='_blank' style='color: lightgray;text-decoration: underline;'>æ›´å¤šé…å¥—æ’ä»¶</a></span></span></div>

<div id="labuladong"><hr>

**é€šçŸ¥ï¼š[æ•°æ®ç»“æ„ç²¾å“è¯¾](https://aep.h5.xeknow.com/s/1XJHEO) å·²æ›´æ–°åˆ° V2.1ï¼Œ[æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘ç³»åˆ—è¯¾ç¨‹](https://aep.xet.tech/s/3YGcq3) ä¸Šçº¿ã€‚[ç¬¬ 18 æœŸæ¯æ—¥æ‰“å¡](https://aep.xet.tech/s/2PLO1n) å¼€å§‹æŠ¥åã€‚**



<p><strong><a href="https://labuladong.github.io/article/slug.html?slug=serialize-and-deserialize-binary-tree" target="_blank">â­ï¸labuladong é¢˜è§£</a></strong></p>
<details><summary><strong>labuladong æ€è·¯</strong></summary>

## åŸºæœ¬æ€è·¯

PSï¼šè¿™é“é¢˜åœ¨[ã€Šç®—æ³•å°æŠ„ã€‹](https://mp.weixin.qq.com/s/tUSovvogbR9StkPWb75fUw) çš„ç¬¬ 247 é¡µã€‚

åºåˆ—åŒ–é—®é¢˜å…¶å®å°±æ˜¯éå†é—®é¢˜ï¼Œä½ èƒ½éå†ï¼Œé¡ºæ‰‹æŠŠéå†çš„ç»“æœè½¬åŒ–æˆå­—ç¬¦ä¸²çš„å½¢å¼ï¼Œä¸å°±æ˜¯åºåˆ—åŒ–äº†ä¹ˆï¼Ÿ

è¿™é‡Œæˆ‘å°±ç®€å•è¯´è¯´ç”¨å‰åºéå†çš„æ€è·¯ï¼Œå‰åºéå†çš„ç‰¹ç‚¹æ˜¯æ ¹èŠ‚ç‚¹åœ¨å¼€å¤´ï¼Œç„¶åæ¥ç€å·¦å­æ ‘çš„å‰åºéå†ç»“æœï¼Œç„¶åæ¥ç€å³å­æ ‘çš„å‰åºéå†ç»“æœï¼š

![](https://labuladong.github.io/pictures/äºŒå‰æ ‘åºåˆ—åŒ–/1.jpeg)

æ‰€ä»¥å¦‚æœæŒ‰ç…§å‰åºéå†é¡ºåºè¿›è¡Œåºåˆ—åŒ–ï¼Œååºåˆ—åŒ–çš„æ—¶å€™ï¼Œå°±çŸ¥é“ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯æ ¹èŠ‚ç‚¹çš„å€¼ï¼Œç„¶åé€’å½’è°ƒç”¨ååºåˆ—åŒ–å·¦å³å­æ ‘ï¼Œæ¥åˆ°æ ¹èŠ‚ç‚¹ä¸Šå³å¯ï¼Œä¸Šè¿°æ€è·¯ç¿»è¯‘æˆä»£ç å³å¯è§£å†³æœ¬é¢˜ã€‚

å½“ç„¶ï¼Œè¿™é¢˜ä¹Ÿå¯ä»¥å°è¯•ä½¿ç”¨äºŒå‰æ ‘çš„ä¸­åºã€ååºã€å±‚åºçš„éå†æ–¹å¼æ¥åšï¼Œå…·ä½“å¯çœ‹è¯¦ç»†é¢˜è§£ã€‚

**è¯¦ç»†é¢˜è§£ï¼š[ä¸œå“¥å¸¦ä½ åˆ·äºŒå‰æ ‘ï¼ˆåºåˆ—åŒ–ç¯‡ï¼‰](https://labuladong.github.io/article/fname.html?fname=äºŒå‰æ ‘çš„åºåˆ—åŒ–)**

**æ ‡ç­¾ï¼š[äºŒå‰æ ‘](https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzAxODQxMDM0Mw==&action=getalbum&album_id=2121994699837177859)ï¼Œ[æ•°æ®ç»“æ„](https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzAxODQxMDM0Mw==&action=getalbum&album_id=1318892385270808576)ï¼Œé€’å½’**

## è§£æ³•ä»£ç 

<div class="tab-panel"><div class="tab-nav">
<button data-tab-item="cpp" class="tab-nav-button btn " data-tab-group="default" onclick="switchTab(this)">cppğŸ¤–</button>

<button data-tab-item="python" class="tab-nav-button btn " data-tab-group="default" onclick="switchTab(this)">pythonğŸ¤–</button>

<button data-tab-item="java" class="tab-nav-button btn active" data-tab-group="default" onclick="switchTab(this)">javağŸŸ¢</button>

<button data-tab-item="go" class="tab-nav-button btn " data-tab-group="default" onclick="switchTab(this)">goğŸ¤–</button>

<button data-tab-item="javascript" class="tab-nav-button btn " data-tab-group="default" onclick="switchTab(this)">javascriptğŸ¤–</button>
</div><div class="tab-content">
<div data-tab-item="cpp" class="tab-item " data-tab-group="default"><div class="highlight">

```cpp
// æ³¨æ„ï¼šcpp ä»£ç ç”± chatGPTğŸ¤– æ ¹æ®æˆ‘çš„ java ä»£ç ç¿»è¯‘ï¼Œæ—¨åœ¨å¸®åŠ©ä¸åŒèƒŒæ™¯çš„è¯»è€…ç†è§£ç®—æ³•é€»è¾‘ã€‚
// æœ¬ä»£ç è¿˜æœªç»è¿‡åŠ›æ‰£æµ‹è¯•ï¼Œä»…ä¾›å‚è€ƒï¼Œå¦‚æœ‰ç–‘æƒ‘ï¼Œå¯ä»¥å‚ç…§æˆ‘å†™çš„ java ä»£ç å¯¹æ¯”æŸ¥çœ‹ã€‚

class Codec {
public:
    string SEP = ",";
    string NULL_STR = "#";

    /* ä¸»å‡½æ•°ï¼Œå°†äºŒå‰æ ‘åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸² */
    string serialize(TreeNode* root) {
        if(!root) return string(NULL_STR) + SEP;
        /* å‰åºéå†ä½ç½® */
        string res = to_string(root->val) + SEP;
        /******************/
        res += serialize(root->left);
        res += serialize(root->right);
        return res;
    }

    /* ä¸»å‡½æ•°ï¼Œå°†å­—ç¬¦ä¸²ååºåˆ—åŒ–ä¸ºäºŒå‰æ ‘ç»“æ„ */
    TreeNode* deserialize(string data) {
        LinkedList<string> nodes;
        string cur = "";
        for(char &c: data) {
            if(c == SEP) {
                nodes.push_back(cur);
                cur = "";
            } else cur += c;
        }
        return deserialize(nodes);
    }

    /* è¾…åŠ©å‡½æ•°ï¼Œé€šè¿‡ nodes åˆ—è¡¨æ„é€ äºŒå‰æ ‘ */
    TreeNode* deserialize(LinkedList<string> &nodes) {
        if(nodes.empty()) return NULL_STRptr;

        /* å‰åºéå†ä½ç½® */
        string first = nodes.front(); nodes.pop_front();
        if(first == NULL_STR) return NULL_STRptr;
        TreeNode* root = new TreeNode(stoi(first));
        /******************/

        root->left = deserialize(nodes);
        root->right = deserialize(nodes);

        return root;
    }
};
```

</div></div>

<div data-tab-item="python" class="tab-item " data-tab-group="default"><div class="highlight">

```python
# æ³¨æ„ï¼špython ä»£ç ç”± chatGPTğŸ¤– æ ¹æ®æˆ‘çš„ java ä»£ç ç¿»è¯‘ï¼Œæ—¨åœ¨å¸®åŠ©ä¸åŒèƒŒæ™¯çš„è¯»è€…ç†è§£ç®—æ³•é€»è¾‘ã€‚
# æœ¬ä»£ç è¿˜æœªç»è¿‡åŠ›æ‰£æµ‹è¯•ï¼Œä»…ä¾›å‚è€ƒï¼Œå¦‚æœ‰ç–‘æƒ‘ï¼Œå¯ä»¥å‚ç…§æˆ‘å†™çš„ java ä»£ç å¯¹æ¯”æŸ¥çœ‹ã€‚

class Codec:
    def __init__(self):
        self.SEP = ','
        self.NULL = '#'

    # å°†äºŒå‰æ ‘åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²
    def serialize(self, root: TreeNode) -> str:
        sb = []
        self._serialize(root, sb)
        return ''.join(sb)

    # å°†äºŒå‰æ ‘å­˜å…¥åˆ—è¡¨
    def _serialize(self, root, sb):
        if not root:
            sb.append(self.NULL).append(self.SEP)
            return 

        # å‰åºéå†ä½ç½®
        sb.append(str(root.val)).append(self.SEP)

        self._serialize(root.left, sb)
        self._serialize(root.right, sb)

    # å°†å­—ç¬¦ä¸²ååºåˆ—åŒ–ä¸ºäºŒå‰æ ‘ç»“æ„
    def deserialize(self, data: str) -> TreeNode:
        # å°†å­—ç¬¦ä¸²è½¬åŒ–æˆåˆ—è¡¨
        nodes = data.split(self.SEP)
        return self._deserialize(nodes)

    # é€šè¿‡ nodes åˆ—è¡¨æ„é€ äºŒå‰æ ‘
    def _deserialize(self, nodes):
        if not nodes:
            return None

        # å‰åºéå†ä½ç½®
        val = nodes.pop(0)
        if val == self.NULL:
            return None
        root = TreeNode(int(val))

        root.left = self._deserialize(nodes)
        root.right = self._deserialize(nodes)

        return root
```

</div></div>

<div data-tab-item="java" class="tab-item active" data-tab-group="default"><div class="highlight">

```java
public class Codec {
    String SEP = ",";
    String NULL = "#";

    /* ä¸»å‡½æ•°ï¼Œå°†äºŒå‰æ ‘åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸² */
    public String serialize(TreeNode root) {
        StringBuilder sb = new StringBuilder();
        serialize(root, sb);
        return sb.toString();
    }

    /* è¾…åŠ©å‡½æ•°ï¼Œå°†äºŒå‰æ ‘å­˜å…¥ StringBuilder */
    void serialize(TreeNode root, StringBuilder sb) {
        if (root == null) {
            sb.append(NULL).append(SEP);
            return;
        }

        /******å‰åºéå†ä½ç½®******/
        sb.append(root.val).append(SEP);
        /***********************/

        serialize(root.left, sb);
        serialize(root.right, sb);
    }

    /* ä¸»å‡½æ•°ï¼Œå°†å­—ç¬¦ä¸²ååºåˆ—åŒ–ä¸ºäºŒå‰æ ‘ç»“æ„ */
    public TreeNode deserialize(String data) {
        // å°†å­—ç¬¦ä¸²è½¬åŒ–æˆåˆ—è¡¨
        LinkedList<String> nodes = new LinkedList<>();
        for (String s : data.split(SEP)) {
            nodes.addLast(s);
        }
        return deserialize(nodes);
    }

    /* è¾…åŠ©å‡½æ•°ï¼Œé€šè¿‡ nodes åˆ—è¡¨æ„é€ äºŒå‰æ ‘ */
    TreeNode deserialize(LinkedList<String> nodes) {
        if (nodes.isEmpty()) return null;

        /******å‰åºéå†ä½ç½®******/
        // åˆ—è¡¨æœ€å·¦ä¾§å°±æ˜¯æ ¹èŠ‚ç‚¹
        String first = nodes.removeFirst();
        if (first.equals(NULL)) return null;
        TreeNode root = new TreeNode(Integer.parseInt(first));
        /***********************/

        root.left = deserialize(nodes);
        root.right = deserialize(nodes);

        return root;
    }
}
```

</div></div>

<div data-tab-item="go" class="tab-item " data-tab-group="default"><div class="highlight">

```go
// æ³¨æ„ï¼šgo ä»£ç ç”± chatGPTğŸ¤– æ ¹æ®æˆ‘çš„ java ä»£ç ç¿»è¯‘ï¼Œæ—¨åœ¨å¸®åŠ©ä¸åŒèƒŒæ™¯çš„è¯»è€…ç†è§£ç®—æ³•é€»è¾‘ã€‚
// æœ¬ä»£ç è¿˜æœªç»è¿‡åŠ›æ‰£æµ‹è¯•ï¼Œä»…ä¾›å‚è€ƒï¼Œå¦‚æœ‰ç–‘æƒ‘ï¼Œå¯ä»¥å‚ç…§æˆ‘å†™çš„ java ä»£ç å¯¹æ¯”æŸ¥çœ‹ã€‚

import (
    "strconv"
    "strings"
)


type Codec struct {
    SEP  string
    NULL string
}

func Constructor() Codec {
    return Codec{
        SEP:  ",",
        NULL: "#",
    }
}

/* è¾…åŠ©å‡½æ•°ï¼Œå°†äºŒå‰æ ‘å­˜å…¥ StringBuilder */
func (this *Codec) serialize(root *TreeNode, sb *strings.Builder) {
    if root == nil {
        sb.WriteString(this.NULL)
        sb.WriteString(this.SEP)
        return
    }

    /******å‰åºéå†ä½ç½®******/
    sb.WriteString(strconv.Itoa(root.Val))
    sb.WriteString(this.SEP)
    /***********************/

    this.serialize(root.Left, sb)
    this.serialize(root.Right, sb)
}

/* ä¸»å‡½æ•°ï¼Œå°†äºŒå‰æ ‘åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸² */
func (this *Codec) serializeTree(root *TreeNode) string {
    sb := &strings.Builder{}
    this.serialize(root, sb)
    return sb.String()
}

/* è¾…åŠ©å‡½æ•°ï¼Œé€šè¿‡ nodes åˆ—è¡¨æ„é€ äºŒå‰æ ‘ */
func (this *Codec) deserialize(nodes *[]string) *TreeNode {
    if len(*nodes) == 0 {
        return nil
    }

    /******å‰åºéå†ä½ç½®******/
    // åˆ—è¡¨æœ€å·¦ä¾§å°±æ˜¯æ ¹èŠ‚ç‚¹
    first := (*nodes)[0]
    *nodes = (*nodes)[1:]
    if first == this.NULL {
        return nil
    }
    root := &TreeNode{
        Val: atoi(first),
    }
    /***********************/

    root.Left = this.deserialize(nodes)
    root.Right = this.deserialize(nodes)

    return root
}

/* ä¸»å‡½æ•°ï¼Œå°†å­—ç¬¦ä¸²ååºåˆ—åŒ–ä¸ºäºŒå‰æ ‘ç»“æ„ */
func (this *Codec) deserializeTree(data string) *TreeNode {
    // å°†å­—ç¬¦ä¸²è½¬åŒ–æˆåˆ—è¡¨
    nodes := strings.Split(data, this.SEP)
    return this.deserialize(&nodes)
}

func atoi(s string) int {
    n, _ := strconv.Atoi(s)
    return n
}
```

</div></div>

<div data-tab-item="javascript" class="tab-item " data-tab-group="default"><div class="highlight">

```javascript
// æ³¨æ„ï¼šjavascript ä»£ç ç”± chatGPTğŸ¤– æ ¹æ®æˆ‘çš„ java ä»£ç ç¿»è¯‘ï¼Œæ—¨åœ¨å¸®åŠ©ä¸åŒèƒŒæ™¯çš„è¯»è€…ç†è§£ç®—æ³•é€»è¾‘ã€‚
// æœ¬ä»£ç è¿˜æœªç»è¿‡åŠ›æ‰£æµ‹è¯•ï¼Œä»…ä¾›å‚è€ƒï¼Œå¦‚æœ‰ç–‘æƒ‘ï¼Œå¯ä»¥å‚ç…§æˆ‘å†™çš„ java ä»£ç å¯¹æ¯”æŸ¥çœ‹ã€‚

/**
 * @constructor
 */
var Codec = function() {
    // ç”¨äºè¿æ¥èŠ‚ç‚¹å­—ç¬¦ä¸²çš„åˆ†éš”ç¬¦
    this.SEP = ",";
    // ç©ºèŠ‚ç‚¹çš„è¡¨ç¤º
    this.NULL = "#";
};

/**
 * Encodes a tree to a single string.
 *
 * @param {TreeNode} root
 * @return {string}
 */
Codec.prototype.serialize = function(root) {
    var sb = [];
    this.serializeHelper(root, sb);
    return sb.join("");
};

/**
 * å°†å­—ç¬¦ä¸²ååºåˆ—åŒ–ä¸ºäºŒå‰æ ‘ç»“æ„
 * Decodes your encoded data to tree.
 *
 * @param {string} data
 * @return {TreeNode}
 */
Codec.prototype.deserialize = function(data) {
    // å°†å­—ç¬¦ä¸²è½¬åŒ–æˆåˆ—è¡¨
    var nodes = data.split(this.SEP);
    return this.deserializeHelper(nodes);
};

Codec.prototype.serializeHelper = function(root, sb) {
    if (root === null) {
        sb.push(this.NULL, this.SEP);
        return;
    }
    // å‰åºéå†ä½ç½®
    sb.push(root.val, this.SEP);
    this.serializeHelper(root.left, sb);
    this.serializeHelper(root.right, sb);
};

Codec.prototype.deserializeHelper = function(nodes) {
    if (nodes.length === 0) return null;
    // å‰åºéå†ä½ç½®ï¼šåˆ—è¡¨æœ€å·¦ä¾§å°±æ˜¯æ ¹èŠ‚ç‚¹
    var val = nodes.shift();
    if (val === this.NULL) return null;
    var root = new TreeNode(parseInt(val));
    root.left = this.deserializeHelper(nodes);
    root.right = this.deserializeHelper(nodes);
    return root;
};
```

</div></div>
</div></div>

**ç±»ä¼¼é¢˜ç›®**ï¼š
  - [449. åºåˆ—åŒ–å’Œååºåˆ—åŒ–äºŒå‰æœç´¢æ ‘ ğŸŸ ](/problems/serialize-and-deserialize-bst)
  - [å‰‘æŒ‡ Offer 37. åºåˆ—åŒ–äºŒå‰æ ‘ ğŸ”´](/problems/xu-lie-hua-er-cha-shu-lcof/)
  - [å‰‘æŒ‡ Offer II 048. åºåˆ—åŒ–ä¸ååºåˆ—åŒ–äºŒå‰æ ‘ ğŸ”´](/problems/h54YBf)

</details>
</div>





