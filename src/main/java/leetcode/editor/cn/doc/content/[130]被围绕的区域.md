ç»™ä½ ä¸€ä¸ª <code>m x n</code> çš„çŸ©é˜µ <code>board</code> ï¼Œç”±è‹¥å¹²å­—ç¬¦ <code>'X'</code> å’Œ <code>'O'</code> ï¼Œæ‰¾åˆ°æ‰€æœ‰è¢« <code>'X'</code> å›´ç»•çš„åŒºåŸŸï¼Œå¹¶å°†è¿™äº›åŒºåŸŸé‡Œæ‰€æœ‰çš„Â <code>'O'</code> ç”¨ <code>'X'</code> å¡«å……ã€‚

<div class="original__bRMd"> 
 <div> 
  <p>&nbsp;</p> 
 </div>
</div>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p> 
<img alt="" src="https://assets.leetcode.com/uploads/2021/02/19/xogrid.jpg" style="width: 550px; height: 237px;" /> 
<pre>
<strong>è¾“å…¥ï¼š</strong>board = [["X","X","X","X"],["X","O","O","X"],["X","X","O","X"],["X","O","X","X"]]
<strong>è¾“å‡ºï¼š</strong>[["X","X","X","X"],["X","X","X","X"],["X","X","X","X"],["X","O","X","X"]]
<strong>è§£é‡Šï¼š</strong>è¢«å›´ç»•çš„åŒºé—´ä¸ä¼šå­˜åœ¨äºè¾¹ç•Œä¸Šï¼Œæ¢å¥è¯è¯´ï¼Œä»»ä½•è¾¹ç•Œä¸Šçš„&nbsp;<span><code>'O'</code></span>&nbsp;éƒ½ä¸ä¼šè¢«å¡«å……ä¸º&nbsp;<span><code>'X'</code></span>ã€‚ ä»»ä½•ä¸åœ¨è¾¹ç•Œä¸Šï¼Œæˆ–ä¸ä¸è¾¹ç•Œä¸Šçš„&nbsp;<span><code>'O'</code></span>&nbsp;ç›¸è¿çš„&nbsp;<span><code>'O'</code></span>&nbsp;æœ€ç»ˆéƒ½ä¼šè¢«å¡«å……ä¸º&nbsp;<span><code>'X'</code></span>ã€‚å¦‚æœä¸¤ä¸ªå…ƒç´ åœ¨æ°´å¹³æˆ–å‚ç›´æ–¹å‘ç›¸é‚»ï¼Œåˆ™ç§°å®ƒä»¬æ˜¯â€œç›¸è¿â€çš„ã€‚
</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>board = [["X"]]
<strong>è¾“å‡ºï¼š</strong>[["X"]]
</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul> 
 <li><code>m == board.length</code></li> 
 <li><code>n == board[i].length</code></li> 
 <li><code>1 &lt;= m, n &lt;= 200</code></li> 
 <li><code>board[i][j]</code> ä¸º <code>'X'</code> æˆ– <code>'O'</code></li> 
</ul>

<details><summary><strong>Related Topics</strong></summary>æ·±åº¦ä¼˜å…ˆæœç´¢ | å¹¿åº¦ä¼˜å…ˆæœç´¢ | å¹¶æŸ¥é›† | æ•°ç»„ | çŸ©é˜µ</details><br>

<div>ğŸ‘ 914, ğŸ‘ 0<span style='float: right;'><span style='color: gray;'><a href='https://github.com/labuladong/fucking-algorithm/discussions/939' target='_blank' style='color: lightgray;text-decoration: underline;'>bug åé¦ˆ</a> | <a href='https://mp.weixin.qq.com/s/NF8mmVyXVfC1ehdMOsO7Cw' target='_blank' style='color: lightgray;text-decoration: underline;'>ä½¿ç”¨æŒ‡å—</a> | <a href='https://labuladong.github.io/algo/images/others/%E5%85%A8%E5%AE%B6%E6%A1%B6.jpg' target='_blank' style='color: lightgray;text-decoration: underline;'>æ›´å¤šé…å¥—æ’ä»¶</a></span></span></div>

<div id="labuladong"><hr>

**é€šçŸ¥ï¼š[æ•°æ®ç»“æ„ç²¾å“è¯¾](https://aep.h5.xeknow.com/s/1XJHEO) å·²æ›´æ–°åˆ° V2.1ï¼Œ[æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘ç³»åˆ—è¯¾ç¨‹](https://aep.xet.tech/s/3YGcq3) ä¸Šçº¿ï¼Œç¬¬ 16 æœŸåˆ·é¢˜æ‰“å¡ [æœ€åä¸€å¤©æŠ¥å](https://aep.xet.tech/s/46nofd)ã€‚**



<p><strong><a href="https://labuladong.github.io/article?qno=130" target="_blank">â­ï¸labuladong é¢˜è§£</a></strong></p>
<details><summary><strong>labuladong æ€è·¯</strong></summary>

## åŸºæœ¬æ€è·¯

PSï¼šè¿™é“é¢˜åœ¨[ã€Šç®—æ³•å°æŠ„ã€‹](https://mp.weixin.qq.com/s/tUSovvogbR9StkPWb75fUw) çš„ç¬¬ 396 é¡µã€‚

è¿™é¢˜å’Œ [1254. ç»Ÿè®¡å°é—­å²›å±¿çš„æ•°ç›®](/problems/number-of-closed-islands) å‡ ä¹å®Œå…¨ä¸€æ ·ï¼Œå¸¸è§„åšæ³•å°±æ˜¯ DFSï¼Œé‚£æˆ‘ä»¬è¿™é‡Œå°±è®²ä¸€ä¸ªå¦ç±»çš„è§£æ³•ï¼Œçœ‹çœ‹å¹¶æŸ¥é›†ç®—æ³•å¦‚ä½•è§£å†³è¿™é“é¢˜ã€‚

æˆ‘ä»¬å¯ä»¥æŠŠæ‰€æœ‰é è¾¹çš„ `O` å’Œä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ `dummy` è¿›è¡Œè¿é€šï¼š

![](https://labuladong.gitee.io/pictures/unionfindåº”ç”¨/3.jpg)

ç„¶åå†éå†æ•´ä¸ª `board`ï¼Œé‚£äº›å’Œ `dummy` ä¸è¿é€šçš„ `O` å°±æ˜¯è¢«å›´ç»•çš„åŒºåŸŸï¼Œéœ€è¦è¢«æ›¿æ¢ã€‚

**è¯¦ç»†é¢˜è§£ï¼š[å¹¶æŸ¥é›†ï¼ˆUnion-Findï¼‰ç®—æ³•](https://labuladong.github.io/article/fname.html?fname=UnionFindç®—æ³•è¯¦è§£)**

**æ ‡ç­¾ï¼š[DFS ç®—æ³•](https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzAxODQxMDM0Mw==&action=getalbum&album_id=2122002916411604996)ï¼Œå¹¶æŸ¥é›†ç®—æ³•**

## è§£æ³•ä»£ç 

```java
class Solution {
    public void solve(char[][] board) {
        if (board.length == 0) return;

        int m = board.length;
        int n = board[0].length;
        // ç»™ dummy ç•™ä¸€ä¸ªé¢å¤–ä½ç½®
        UF uf = new UF(m * n + 1);
        int dummy = m * n;
        // å°†é¦–åˆ—å’Œæœ«åˆ—çš„ O ä¸ dummy è¿é€š
        for (int i = 0; i < m; i++) {
            if (board[i][0] == 'O')
                uf.union(i * n, dummy);
            if (board[i][n - 1] == 'O')
                uf.union(i * n + n - 1, dummy);
        }
        // å°†é¦–è¡Œå’Œæœ«è¡Œçš„ O ä¸ dummy è¿é€š
        for (int j = 0; j < n; j++) {/**<extend up -150>

![](https://labuladong.gitee.io/pictures/unionfindåº”ç”¨/3.jpg)
*/
            if (board[0][j] == 'O')
                uf.union(j, dummy);
            if (board[m - 1][j] == 'O')
                uf.union(n * (m - 1) + j, dummy);
        }
        // æ–¹å‘æ•°ç»„ d æ˜¯ä¸Šä¸‹å·¦å³æœç´¢çš„å¸¸ç”¨æ‰‹æ³•
        int[][] d = new int[][]{{1, 0}, {0, 1}, {0, -1}, {-1, 0}};
        for (int i = 1; i < m - 1; i++)
            for (int j = 1; j < n - 1; j++)
                if (board[i][j] == 'O')
                    // å°†æ­¤ O ä¸ä¸Šä¸‹å·¦å³çš„ O è¿é€š
                    for (int k = 0; k < 4; k++) {
                        int x = i + d[k][0];
                        int y = j + d[k][1];
                        if (board[x][y] == 'O')
                            uf.union(x * n + y, i * n + j);
                    }
        // æ‰€æœ‰ä¸å’Œ dummy è¿é€šçš„ Oï¼Œéƒ½è¦è¢«æ›¿æ¢
        for (int i = 1; i < m - 1; i++)
            for (int j = 1; j < n - 1; j++)
                if (!uf.connected(dummy, i * n + j))
                    board[i][j] = 'X';
    }
}

class UF {
    // è®°å½•è¿é€šåˆ†é‡ä¸ªæ•°
    private int count;
    // å­˜å‚¨è‹¥å¹²æ£µæ ‘
    private int[] parent;
    // è®°å½•æ ‘çš„â€œé‡é‡â€
    private int[] size;

    public UF(int n) {
        this.count = n;
        parent = new int[n];
        size = new int[n];
        for (int i = 0; i < n; i++) {
            parent[i] = i;
            size[i] = 1;
        }
    }

    /* å°† p å’Œ q è¿é€š */
    public void union(int p, int q) {
        int rootP = find(p);
        int rootQ = find(q);
        if (rootP == rootQ)
            return;

        // å°æ ‘æ¥åˆ°å¤§æ ‘ä¸‹é¢ï¼Œè¾ƒå¹³è¡¡
        if (size[rootP] > size[rootQ]) {
            parent[rootQ] = rootP;
            size[rootP] += size[rootQ];
        } else {
            parent[rootP] = rootQ;
            size[rootQ] += size[rootP];
        }
        count--;
    }

    /* åˆ¤æ–­ p å’Œ q æ˜¯å¦äº’ç›¸è¿é€š */
    public boolean connected(int p, int q) {
        int rootP = find(p);
        int rootQ = find(q);
        // å¤„äºåŒä¸€æ£µæ ‘ä¸Šçš„èŠ‚ç‚¹ï¼Œç›¸äº’è¿é€š
        return rootP == rootQ;
    }

    /* è¿”å›èŠ‚ç‚¹ x çš„æ ¹èŠ‚ç‚¹ */
    private int find(int x) {
        while (parent[x] != x) {
            // è¿›è¡Œè·¯å¾„å‹ç¼©
            parent[x] = parent[parent[x]];
            x = parent[x];
        }
        return x;
    }

    public int count() {
        return count;
    }
}
```

**ç±»ä¼¼é¢˜ç›®**ï¼š
  - [323. æ— å‘å›¾ä¸­è¿é€šåˆ†é‡çš„æ•°ç›® ğŸŸ ](/problems/number-of-connected-components-in-an-undirected-graph)
  - [990. ç­‰å¼æ–¹ç¨‹çš„å¯æ»¡è¶³æ€§ ğŸŸ ](/problems/satisfiability-of-equality-equations)

</details>
</div>



