<p>ç»™ä½ ä¸€ä¸ªç”± <code>n</code> ä¸ªèŠ‚ç‚¹ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰ç»„æˆçš„æ— å‘åŠ æƒå›¾ï¼Œè¯¥å›¾ç”±ä¸€ä¸ªæè¿°è¾¹çš„åˆ—è¡¨ç»„æˆï¼Œå…¶ä¸­ <code>edges[i] = [a, b]</code> è¡¨ç¤ºè¿æ¥èŠ‚ç‚¹ a å’Œ b çš„ä¸€æ¡æ— å‘è¾¹ï¼Œä¸”è¯¥è¾¹éå†æˆåŠŸçš„æ¦‚ç‡ä¸º <code>succProb[i]</code> ã€‚</p>

<p>æŒ‡å®šä¸¤ä¸ªèŠ‚ç‚¹åˆ†åˆ«ä½œä¸ºèµ·ç‚¹ <code>start</code> å’Œç»ˆç‚¹ <code>end</code> ï¼Œè¯·ä½ æ‰¾å‡ºä»èµ·ç‚¹åˆ°ç»ˆç‚¹æˆåŠŸæ¦‚ç‡æœ€å¤§çš„è·¯å¾„ï¼Œå¹¶è¿”å›å…¶æˆåŠŸæ¦‚ç‡ã€‚</p>

<p>å¦‚æœä¸å­˜åœ¨ä» <code>start</code> åˆ° <code>end</code> çš„è·¯å¾„ï¼Œè¯· <strong>è¿”å› 0</strong> ã€‚åªè¦ç­”æ¡ˆä¸æ ‡å‡†ç­”æ¡ˆçš„è¯¯å·®ä¸è¶…è¿‡ <strong>1e-5 </strong>ï¼Œå°±ä¼šè¢«è§†ä½œæ­£ç¡®ç­”æ¡ˆã€‚</p>

<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>

<p><strong><img alt="" src="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2020/07/12/1558_ex1.png" style="height: 186px; width: 187px;" /></strong></p>

<pre><strong>è¾“å…¥ï¼š</strong>n = 3, edges = [[0,1],[1,2],[0,2]], succProb = [0.5,0.5,0.2], start = 0, end = 2
<strong>è¾“å‡ºï¼š</strong>0.25000
<strong>è§£é‡Šï¼š</strong>ä»èµ·ç‚¹åˆ°ç»ˆç‚¹æœ‰ä¸¤æ¡è·¯å¾„ï¼Œå…¶ä¸­ä¸€æ¡çš„æˆåŠŸæ¦‚ç‡ä¸º 0.2 ï¼Œè€Œå¦ä¸€æ¡ä¸º 0.5 * 0.5 = 0.25
</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>

<p><strong><img alt="" src="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2020/07/12/1558_ex2.png" style="height: 186px; width: 189px;" /></strong></p>

<pre><strong>è¾“å…¥ï¼š</strong>n = 3, edges = [[0,1],[1,2],[0,2]], succProb = [0.5,0.5,0.3], start = 0, end = 2
<strong>è¾“å‡ºï¼š</strong>0.30000
</pre>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>

<p><strong><img alt="" src="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2020/07/12/1558_ex3.png" style="height: 191px; width: 215px;" /></strong></p>

<pre><strong>è¾“å…¥ï¼š</strong>n = 3, edges = [[0,1]], succProb = [0.5], start = 0, end = 2
<strong>è¾“å‡ºï¼š</strong>0.00000
<strong>è§£é‡Šï¼š</strong>èŠ‚ç‚¹ 0 å’Œ èŠ‚ç‚¹ 2 ä¹‹é—´ä¸å­˜åœ¨è·¯å¾„
</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul> 
 <li><code>2 &lt;= n &lt;= 10^4</code></li> 
 <li><code>0 &lt;= start, end &lt; n</code></li> 
 <li><code>start != end</code></li> 
 <li><code>0 &lt;= a, b &lt; n</code></li> 
 <li><code>a != b</code></li> 
 <li><code>0 &lt;= succProb.length == edges.length &lt;= 2*10^4</code></li> 
 <li><code>0 &lt;= succProb[i] &lt;= 1</code></li> 
 <li>æ¯ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´æœ€å¤šæœ‰ä¸€æ¡è¾¹</li> 
</ul>

<details><summary><strong>Related Topics</strong></summary>å›¾ | æ•°ç»„ | æœ€çŸ­è·¯ | å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰</details><br>

<div>ğŸ‘ 115, ğŸ‘ 0<span style='float: right;'><span style='color: gray;'><a href='https://github.com/labuladong/fucking-algorithm/discussions/939' target='_blank' style='color: lightgray;text-decoration: underline;'>bug åé¦ˆ</a> | <a href='https://mp.weixin.qq.com/s/NF8mmVyXVfC1ehdMOsO7Cw' target='_blank' style='color: lightgray;text-decoration: underline;'>ä½¿ç”¨æŒ‡å—</a> | <a href='https://labuladong.github.io/algo/images/others/%E5%85%A8%E5%AE%B6%E6%A1%B6.jpg' target='_blank' style='color: lightgray;text-decoration: underline;'>æ›´å¤šé…å¥—æ’ä»¶</a></span></span></div>

<div id="labuladong"><hr>

**é€šçŸ¥ï¼š[æ•°æ®ç»“æ„ç²¾å“è¯¾](https://aep.h5.xeknow.com/s/1XJHEO) å·²æ›´æ–°åˆ° V2.1ï¼Œ[æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘ç³»åˆ—è¯¾ç¨‹](https://aep.xet.tech/s/3YGcq3) ä¸Šçº¿ï¼Œç¬¬ 16 æœŸåˆ·é¢˜æ‰“å¡ [æœ€åä¸€å¤©æŠ¥å](https://aep.xet.tech/s/46nofd)ã€‚**



<p><strong><a href="https://labuladong.github.io/article?qno=1514" target="_blank">â­ï¸labuladong é¢˜è§£</a></strong></p>
<details><summary><strong>labuladong æ€è·¯</strong></summary>

## åŸºæœ¬æ€è·¯

è™½ç„¶è¿™é¢˜è®©è®¡ç®—æœ€å¤§å€¼ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥ç”¨ Dijkstra ç®—æ³•æ¨¡æ¿ï¼Œç”±äº Dijkstra ç®—æ³•èƒŒæ™¯çŸ¥è¯†è¾ƒå¤šï¼Œè¯·çœ‹è¯¦ç»†é¢˜è§£ã€‚

**è¯¦ç»†é¢˜è§£ï¼š[Dijkstra ç®—æ³•æ¨¡æ¿åŠåº”ç”¨](https://labuladong.github.io/article/fname.html?fname=dijkstraç®—æ³•)**

**æ ‡ç­¾ï¼šDijkstra ç®—æ³•ï¼Œ[å›¾è®ºç®—æ³•](https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzAxODQxMDM0Mw==&action=getalbum&album_id=2122000448684457990)ï¼Œæœ€çŸ­è·¯å¾„ç®—æ³•**

## è§£æ³•ä»£ç 

```java
class Solution {
    public double maxProbability(int n, int[][] edges, double[] succProb, int start, int end) {
        List<double[]>[] graph = new LinkedList[n];
        for (int i = 0; i < n; i++) {
            graph[i] = new LinkedList<>();
        }
        // æ„é€ æ— å‘å›¾
        for (int i = 0; i < edges.length; i++) {
            int from = edges[i][0];
            int to = edges[i][1];
            double weight = succProb[i];
            // æ— å‘å›¾å…¶å®å°±æ˜¯åŒå‘å›¾
            graph[from].add(new double[]{(double)to, weight});
            graph[to].add(new double[]{(double)from, weight});
        }
        
        
        return dijkstra(start, end, graph);
    }
    
    class State {
        // å›¾èŠ‚ç‚¹çš„ id
        int id;
        // ä» start èŠ‚ç‚¹åˆ°å½“å‰èŠ‚ç‚¹çš„è·ç¦»
        double distFromStart;

        State(int id, double distFromStart) {
            this.id = id;
            this.distFromStart = distFromStart;
        }
    }
    
    double dijkstra(int start, int end, List<double[]>[] graph) {
        // å›¾ä¸­èŠ‚ç‚¹çš„ä¸ªæ•°
        int V = graph.length;
        // è®°å½•æœ€çŸ­è·¯å¾„çš„æƒé‡ï¼Œä½ å¯ä»¥ç†è§£ä¸º dp table
        // å®šä¹‰ï¼šdistTo[i] çš„å€¼å°±æ˜¯èŠ‚ç‚¹ start åˆ°è¾¾èŠ‚ç‚¹ i çš„æœ€çŸ­è·¯å¾„æƒé‡
        double[] distTo = new double[V];
        // dp table åˆå§‹åŒ–ä¸ºæ­£æ— ç©·
        Arrays.fill(distTo, -1);
        // base caseï¼Œstart åˆ° start çš„æœ€çŸ­è·ç¦»å°±æ˜¯ 0
        distTo[start] = 1;

        // ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼ŒdistFromStart è¾ƒå°çš„æ’åœ¨å‰é¢
        Queue<State> pq = new PriorityQueue<>((a, b) -> {
            return Double.compare(b.distFromStart, a.distFromStart);
        });
        // ä»èµ·ç‚¹ start å¼€å§‹è¿›è¡Œ BFS
        pq.offer(new State(start, 1));

        while (!pq.isEmpty()) {
            State curState = pq.poll();
            int curNodeID = curState.id;
            double curDistFromStart = curState.distFromStart;

            // åœ¨è¿™é‡ŒåŠ ä¸€ä¸ªåˆ¤æ–­å°±è¡Œäº†ï¼Œå…¶ä»–ä»£ç ä¸ç”¨æ”¹
            if (curNodeID == end) {
                return curDistFromStart;
            }
            
            if (curDistFromStart < distTo[curNodeID]) {
                // å·²ç»æœ‰ä¸€æ¡æ›´çŸ­çš„è·¯å¾„åˆ°è¾¾ curNode èŠ‚ç‚¹äº†
                continue;
            }
            // å°† curNode çš„ç›¸é‚»èŠ‚ç‚¹è£…å…¥é˜Ÿåˆ—
            for (double[] neighbor : graph[curNodeID]) {
                int nextNodeID = (int)neighbor[0];
                // çœ‹çœ‹ä» curNode è¾¾åˆ° nextNode çš„è·ç¦»æ˜¯å¦ä¼šæ›´çŸ­
                double distToNextNode = distTo[curNodeID] * neighbor[1];
                if (distTo[nextNodeID] < distToNextNode) {
                    // æ›´æ–° dp table
                    distTo[nextNodeID] = distToNextNode;
                    // å°†è¿™ä¸ªèŠ‚ç‚¹ä»¥åŠè·ç¦»æ”¾å…¥é˜Ÿåˆ—
                    pq.offer(new State(nextNodeID, distToNextNode));
                }
            }
        }
        return 0.0;
    }
}
```

**ç±»ä¼¼é¢˜ç›®**ï¼š
  - [1631. æœ€å°ä½“åŠ›æ¶ˆè€—è·¯å¾„ ğŸŸ ](/problems/path-with-minimum-effort)
  - [743. ç½‘ç»œå»¶è¿Ÿæ—¶é—´ ğŸŸ ](/problems/network-delay-time)

</details>
</div>



