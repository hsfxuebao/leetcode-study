<p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„
 <meta charset="UTF-8" /><code>prices</code>ï¼Œå…¶ä¸­ç¬¬&nbsp;<em>&nbsp;</em><code>prices[i]</code>&nbsp;è¡¨ç¤ºç¬¬&nbsp;<code><em>i</em></code>&nbsp;å¤©çš„è‚¡ç¥¨ä»·æ ¼ ã€‚â€‹</p>

<p>è®¾è®¡ä¸€ä¸ªç®—æ³•è®¡ç®—å‡ºæœ€å¤§åˆ©æ¶¦ã€‚åœ¨æ»¡è¶³ä»¥ä¸‹çº¦æŸæ¡ä»¶ä¸‹ï¼Œä½ å¯ä»¥å°½å¯èƒ½åœ°å®Œæˆæ›´å¤šçš„äº¤æ˜“ï¼ˆå¤šæ¬¡ä¹°å–ä¸€æ”¯è‚¡ç¥¨ï¼‰:</p>

<ul> 
 <li>å–å‡ºè‚¡ç¥¨åï¼Œä½ æ— æ³•åœ¨ç¬¬äºŒå¤©ä¹°å…¥è‚¡ç¥¨ (å³å†·å†»æœŸä¸º 1 å¤©)ã€‚</li> 
</ul>

<p><strong>æ³¨æ„ï¼š</strong>ä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚</p>

<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹ 1:</strong></p>

<pre>
<strong>è¾“å…¥:</strong> prices = [1,2,3,0,2]
<strong>è¾“å‡º: </strong>3 
<strong>è§£é‡Š:</strong> å¯¹åº”çš„äº¤æ˜“çŠ¶æ€ä¸º: [ä¹°å…¥, å–å‡º, å†·å†»æœŸ, ä¹°å…¥, å–å‡º]</pre>

<p><strong>ç¤ºä¾‹ 2:</strong></p>

<pre>
<strong>è¾“å…¥:</strong> prices = [1]
<strong>è¾“å‡º:</strong> 0
</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul> 
 <li><code>1 &lt;= prices.length &lt;= 5000</code></li> 
 <li><code>0 &lt;= prices[i] &lt;= 1000</code></li> 
</ul>

<details><summary><strong>Related Topics</strong></summary>æ•°ç»„ | åŠ¨æ€è§„åˆ’</details><br>

<div>ğŸ‘ 1502, ğŸ‘ 0<span style='float: right;'><span style='color: gray;'><a href='https://github.com/labuladong/fucking-algorithm/discussions/939' target='_blank' style='color: lightgray;text-decoration: underline;'>bug åé¦ˆ</a> | <a href='https://labuladong.gitee.io/article/fname.html?fname=jbæ’ä»¶ç®€ä»‹' target='_blank' style='color: lightgray;text-decoration: underline;'>ä½¿ç”¨æŒ‡å—</a> | <a href='https://labuladong.github.io/algo/images/others/%E5%85%A8%E5%AE%B6%E6%A1%B6.jpg' target='_blank' style='color: lightgray;text-decoration: underline;'>æ›´å¤šé…å¥—æ’ä»¶</a></span></span></div>

<div id="labuladong"><hr>

**é€šçŸ¥ï¼š[æ•°æ®ç»“æ„ç²¾å“è¯¾](https://aep.h5.xeknow.com/s/1XJHEO) å·²æ›´æ–°åˆ° V2.1ï¼Œ[æ‰‹æŠŠæ‰‹åˆ·äºŒå‰æ ‘ç³»åˆ—è¯¾ç¨‹](https://aep.xet.tech/s/3YGcq3) ä¸Šçº¿ã€‚**



<p><strong><a href="https://labuladong.gitee.io/article/slug.html?slug=best-time-to-buy-and-sell-stock-with-cooldown" target="_blank">â­ï¸labuladong é¢˜è§£</a></strong></p>
<details><summary><strong>labuladong æ€è·¯</strong></summary>

## åŸºæœ¬æ€è·¯

**æç¤ºï¼šè‚¡ç¥¨ç³»åˆ—é—®é¢˜æœ‰å…±é€šæ€§ï¼Œä½†éš¾åº¦è¾ƒå¤§ï¼Œåˆæ¬¡æ¥è§¦æ­¤ç±»é—®é¢˜çš„è¯å¾ˆéš¾çœ‹æ‡‚ä¸‹è¿°æ€è·¯ï¼Œå»ºè®®ç›´æ¥çœ‹ [è¯¦ç»†é¢˜è§£](https://labuladong.github.io/article/fname.html?fname=å›¢ç­è‚¡ç¥¨é—®é¢˜)ã€‚**

è‚¡ç¥¨ç³»åˆ—é—®é¢˜çŠ¶æ€å®šä¹‰ï¼š

```python
dp[i][k][0 or 1]
0 <= i <= n - 1, 1 <= k <= K
n ä¸ºå¤©æ•°ï¼Œå¤§ K ä¸ºäº¤æ˜“æ•°çš„ä¸Šé™ï¼Œ0 å’Œ 1 ä»£è¡¨æ˜¯å¦æŒæœ‰è‚¡ç¥¨ã€‚
```

è‚¡ç¥¨ç³»åˆ—é—®é¢˜é€šç”¨çŠ¶æ€è½¬ç§»æ–¹ç¨‹å’Œ base caseï¼š

```python
çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š
dp[i][k][0] = max(dp[i-1][k][0], dp[i-1][k][1] + prices[i])
dp[i][k][1] = max(dp[i-1][k][1], dp[i-1][k-1][0] - prices[i])

base caseï¼š
dp[-1][...][0] = dp[...][0][0] = 0
dp[-1][...][1] = dp[...][0][1] = -infinity
```

ç‰¹åŒ–åˆ° `k` æ— é™åˆ¶ä¸”åŒ…å«æ‰‹ç»­è´¹çš„æƒ…å†µï¼Œåªéœ€ç¨å¾®ä¿®æ”¹ [122. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II](/problems/best-time-to-buy-and-sell-stock-ii)ï¼Œæ¯æ¬¡ `sell` ä¹‹åè¦ç­‰ä¸€å¤©æ‰èƒ½ç»§ç»­äº¤æ˜“ã€‚

åªè¦æŠŠè¿™ä¸ªç‰¹ç‚¹èå…¥ä¸Šä¸€é¢˜çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹å³å¯ï¼š

```python
dp[i][0] = max(dp[i-1][0], dp[i-1][1] + prices[i])
dp[i][1] = max(dp[i-1][1], dp[i-2][0] - prices[i])
è§£é‡Šï¼šç¬¬ i å¤©é€‰æ‹© buy çš„æ—¶å€™ï¼Œè¦ä» i-2 çš„çŠ¶æ€è½¬ç§»ï¼Œè€Œä¸æ˜¯ i-1ã€‚
```

å½“ç„¶ï¼Œç”±äº `i - 2` ä¹Ÿå¯èƒ½å°äº 0ï¼Œæ‰€ä»¥å†æ·»åŠ ä¸€ä¸ª `i - 2 < 0` çš„ base caseï¼Œæ ¹æ®çŠ¶æ€è½¬ç§»æ–¹ç¨‹æ¨å‡º base case çš„å…·ä½“é€»è¾‘ã€‚

è¯¦ç»†æ€è·¯è§£æå’Œç©ºé—´å¤æ‚åº¦ä¼˜åŒ–çš„è§£æ³•è§è¯¦ç»†é¢˜è§£ã€‚

**è¯¦ç»†é¢˜è§£ï¼š[ä¸€ä¸ªæ–¹æ³•å›¢ç­ LeetCode è‚¡ç¥¨ä¹°å–é—®é¢˜](https://labuladong.github.io/article/fname.html?fname=å›¢ç­è‚¡ç¥¨é—®é¢˜)**

**æ ‡ç­¾ï¼š[äºŒç»´åŠ¨æ€è§„åˆ’](https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzAxODQxMDM0Mw==&action=getalbum&album_id=2122017695998050308)ï¼Œ[åŠ¨æ€è§„åˆ’](https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzAxODQxMDM0Mw==&action=getalbum&album_id=1318881141113536512)**

## è§£æ³•ä»£ç 

æç¤ºï¼šğŸŸ¢ æ ‡è®°çš„æ˜¯æˆ‘å†™çš„è§£æ³•ä»£ç ï¼ŒğŸ¤– æ ‡è®°çš„æ˜¯ chatGPT ç¿»è¯‘çš„å¤šè¯­è¨€è§£æ³•ä»£ç ã€‚å¦‚æœ‰é”™è¯¯ï¼Œå¯ä»¥ [ç‚¹è¿™é‡Œ](https://github.com/labuladong/fucking-algorithm/issues/1113) åé¦ˆå’Œä¿®æ­£ã€‚

<div class="tab-panel"><div class="tab-nav">
<button data-tab-item="cpp" class="tab-nav-button btn " data-tab-group="default" onclick="switchTab(this)">cppğŸ¤–</button>

<button data-tab-item="python" class="tab-nav-button btn " data-tab-group="default" onclick="switchTab(this)">pythonğŸ¤–</button>

<button data-tab-item="java" class="tab-nav-button btn active" data-tab-group="default" onclick="switchTab(this)">javağŸŸ¢</button>

<button data-tab-item="go" class="tab-nav-button btn " data-tab-group="default" onclick="switchTab(this)">goğŸ¤–</button>

<button data-tab-item="javascript" class="tab-nav-button btn " data-tab-group="default" onclick="switchTab(this)">javascriptğŸ¤–</button>
</div><div class="tab-content">
<div data-tab-item="cpp" class="tab-item " data-tab-group="default"><div class="highlight">

```cpp
// æ³¨æ„ï¼šcpp ä»£ç ç”± chatGPTğŸ¤– æ ¹æ®æˆ‘çš„ java ä»£ç ç¿»è¯‘ï¼Œæ—¨åœ¨å¸®åŠ©ä¸åŒèƒŒæ™¯çš„è¯»è€…ç†è§£ç®—æ³•é€»è¾‘ã€‚
// æœ¬ä»£ç å·²ç»é€šè¿‡åŠ›æ‰£çš„æµ‹è¯•ç”¨ä¾‹ï¼Œåº”è¯¥å¯ç›´æ¥æˆåŠŸæäº¤ã€‚

class Solution {
public:
    int maxProfit(vector<int>& prices) {
        int n = prices.size();
        vector<vector<int>> dp(n, vector<int>(2));
        for (int i = 0; i < n; i++) {
            if (i - 1 == -1) {
                // base case 1
                dp[i][0] = 0;
                dp[i][1] = -prices[i];
                continue;
            }
            if (i - 2 == -1) {
                // base case 2
                dp[i][0] = max(dp[i - 1][0], dp[i - 1][1] + prices[i]);
                // i - 2 å°äº 0 æ—¶æ ¹æ®çŠ¶æ€è½¬ç§»æ–¹ç¨‹æ¨å‡ºå¯¹åº” base case
                dp[i][1] = max(dp[i - 1][1], -prices[i]);
                //   dp[i][1]
                // = max(dp[i-1][1], dp[-1][0] - prices[i])
                // = max(dp[i-1][1], 0 - prices[i])
                // = max(dp[i-1][1], -prices[i])
                continue;
            }
            dp[i][0] = max(dp[i - 1][0], dp[i - 1][1] + prices[i]);
            dp[i][1] = max(dp[i - 1][1], dp[i - 2][0] - prices[i]);
        }
        return dp[n - 1][0];
    }
};
```

</div></div>

<div data-tab-item="python" class="tab-item " data-tab-group="default"><div class="highlight">

```python
# æ³¨æ„ï¼špython ä»£ç ç”± chatGPTğŸ¤– æ ¹æ®æˆ‘çš„ java ä»£ç ç¿»è¯‘ï¼Œæ—¨åœ¨å¸®åŠ©ä¸åŒèƒŒæ™¯çš„è¯»è€…ç†è§£ç®—æ³•é€»è¾‘ã€‚
# æœ¬ä»£ç å·²ç»é€šè¿‡åŠ›æ‰£çš„æµ‹è¯•ç”¨ä¾‹ï¼Œåº”è¯¥å¯ç›´æ¥æˆåŠŸæäº¤ã€‚

class Solution:
    def maxProfit(self, prices: List[int]) -> int:
        n = len(prices)
        dp = [[0]*2 for _ in range(n)]
        for i in range(n):
            if i - 1 == -1:
                # base case 1
                dp[i][0] = 0
                dp[i][1] = -prices[i]
                continue
            if i - 2 == -1:
                # base case 2
                dp[i][0] = max(dp[i - 1][0], dp[i - 1][1] + prices[i])
                # i - 2 å°äº 0 æ—¶æ ¹æ®çŠ¶æ€è½¬ç§»æ–¹ç¨‹æ¨å‡ºå¯¹åº” base case
                dp[i][1] = max(dp[i - 1][1], -prices[i])
                #   dp[i][1]
                # = max(dp[i-1][1], dp[-1][0] - prices[i])
                # = max(dp[i-1][1], 0 - prices[i])
                # = max(dp[i-1][1], -prices[i])
                continue
            dp[i][0] = max(dp[i - 1][0], dp[i - 1][1] + prices[i])
            dp[i][1] = max(dp[i - 1][1], dp[i - 2][0] - prices[i])
        return dp[n - 1][0]
```

</div></div>

<div data-tab-item="java" class="tab-item active" data-tab-group="default"><div class="highlight">

```java
class Solution {
    public int maxProfit(int[] prices) {
        int n = prices.length;
        int[][] dp = new int[n][2];
        for (int i = 0; i < n; i++) {
            if (i - 1 == -1) {
                // base case 1
                dp[i][0] = 0;
                dp[i][1] = -prices[i];
                continue;
            }
            if (i - 2 == -1) {
                // base case 2
                dp[i][0] = Math.max(dp[i - 1][0], dp[i - 1][1] + prices[i]);
                // i - 2 å°äº 0 æ—¶æ ¹æ®çŠ¶æ€è½¬ç§»æ–¹ç¨‹æ¨å‡ºå¯¹åº” base case
                dp[i][1] = Math.max(dp[i - 1][1], -prices[i]);
                //   dp[i][1]
                // = max(dp[i-1][1], dp[-1][0] - prices[i])
                // = max(dp[i-1][1], 0 - prices[i])
                // = max(dp[i-1][1], -prices[i])
                continue;
            }
            dp[i][0] = Math.max(dp[i - 1][0], dp[i - 1][1] + prices[i]);
            dp[i][1] = Math.max(dp[i - 1][1], dp[i - 2][0] - prices[i]);
        }
        return dp[n - 1][0];
    }
}
```

</div></div>

<div data-tab-item="go" class="tab-item " data-tab-group="default"><div class="highlight">

```go
// æ³¨æ„ï¼šgo ä»£ç ç”± chatGPTğŸ¤– æ ¹æ®æˆ‘çš„ java ä»£ç ç¿»è¯‘ï¼Œæ—¨åœ¨å¸®åŠ©ä¸åŒèƒŒæ™¯çš„è¯»è€…ç†è§£ç®—æ³•é€»è¾‘ã€‚
// æœ¬ä»£ç å·²ç»é€šè¿‡åŠ›æ‰£çš„æµ‹è¯•ç”¨ä¾‹ï¼Œåº”è¯¥å¯ç›´æ¥æˆåŠŸæäº¤ã€‚

func maxProfit(prices []int) int {
    n := len(prices)
    dp := make([][2]int, n)
    for i := 0; i < n; i++ {
        if i-1 == -1 {
            // base case 1
            dp[i][0] = 0
            dp[i][1] = -prices[i]
            continue
        }
        if i-2 == -1 {
            // base case 2
            dp[i][0] = max(dp[i-1][0], dp[i-1][1]+prices[i])
            // i - 2 å°äº 0 æ—¶æ ¹æ®çŠ¶æ€è½¬ç§»æ–¹ç¨‹æ¨å‡ºå¯¹åº” base case
            dp[i][1] = max(dp[i-1][1], -prices[i])
            //   dp[i][1]
            // = max(dp[i-1][1], dp[-1][0] - prices[i])
            // = max(dp[i-1][1], 0 - prices[i])
            // = max(dp[i-1][1], -prices[i])
            continue
        }
        dp[i][0] = max(dp[i-1][0], dp[i-1][1]+prices[i])
        dp[i][1] = max(dp[i-1][1], dp[i-2][0]-prices[i])
    }
    return dp[n-1][0]
}

func max(x, y int) int {
    if x > y {
        return x
    }
    return y
}
```

</div></div>

<div data-tab-item="javascript" class="tab-item " data-tab-group="default"><div class="highlight">

```javascript
// æ³¨æ„ï¼šjavascript ä»£ç ç”± chatGPTğŸ¤– æ ¹æ®æˆ‘çš„ java ä»£ç ç¿»è¯‘ï¼Œæ—¨åœ¨å¸®åŠ©ä¸åŒèƒŒæ™¯çš„è¯»è€…ç†è§£ç®—æ³•é€»è¾‘ã€‚
// æœ¬ä»£ç å·²ç»é€šè¿‡åŠ›æ‰£çš„æµ‹è¯•ç”¨ä¾‹ï¼Œåº”è¯¥å¯ç›´æ¥æˆåŠŸæäº¤ã€‚

/**
 * @param {number[]} prices
 * @return {number}
 */
var maxProfit = function(prices) {
    let n = prices.length;
    let dp = Array.from(Array(n), () => new Array(2).fill(0));
    for (let i = 0; i < n; i++) {
        if (i - 1 == -1) {
            // base case 1
            dp[i][0] = 0;
            dp[i][1] = -prices[i];
            continue;
        }
        if (i - 2 == -1) {
            // base case 2
            dp[i][0] = Math.max(dp[i - 1][0], dp[i - 1][1] + prices[i]);
            // i - 2 å°äº 0 æ—¶æ ¹æ®çŠ¶æ€è½¬ç§»æ–¹ç¨‹æ¨å‡ºå¯¹åº” base case
            dp[i][1] = Math.max(dp[i - 1][1], -prices[i]);
            //   dp[i][1]
            // = max(dp[i-1][1], dp[-1][0] - prices[i])
            // = max(dp[i-1][1], 0 - prices[i])
            // = max(dp[i-1][1], -prices[i])
            continue;
        }
        dp[i][0] = Math.max(dp[i - 1][0], dp[i - 1][1] + prices[i]);
        dp[i][1] = Math.max(dp[i - 1][1], dp[i - 2][0] - prices[i]);
    }
    return dp[n - 1][0];
};
```

</div></div>
</div></div>

**ç±»ä¼¼é¢˜ç›®**ï¼š
  - [121. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº ğŸŸ¢](/problems/best-time-to-buy-and-sell-stock)
  - [122. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II ğŸŸ ](/problems/best-time-to-buy-and-sell-stock-ii)
  - [123. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº III ğŸ”´](/problems/best-time-to-buy-and-sell-stock-iii)
  - [188. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IV ğŸ”´](/problems/best-time-to-buy-and-sell-stock-iv)
  - [714. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹ ğŸŸ ](/problems/best-time-to-buy-and-sell-stock-with-transaction-fee)
  - [å‰‘æŒ‡ Offer 63. è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦ ğŸŸ ](/problems/gu-piao-de-zui-da-li-run-lcof)

</details>
</div>





