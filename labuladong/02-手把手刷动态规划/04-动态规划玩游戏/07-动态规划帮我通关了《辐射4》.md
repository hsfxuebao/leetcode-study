# åŠ¨æ€è§„åˆ’å¸®æˆ‘é€šå…³äº†ã€Šè¾å°„4ã€‹



è¯»å®Œæœ¬æ–‡ï¼Œä½ ä¸ä»…å­¦ä¼šäº†ç®—æ³•å¥—è·¯ï¼Œè¿˜å¯ä»¥é¡ºä¾¿è§£å†³å¦‚ä¸‹é¢˜ç›®ï¼š

|                           LeetCode                           |                             åŠ›æ‰£                             | éš¾åº¦ |
| :----------------------------------------------------------: | :----------------------------------------------------------: | :--: |
| [514. Freedom Trailopen in new window](https://leetcode.com/problems/freedom-trail/) | [514. è‡ªç”±ä¹‹è·¯open in new window](https://leetcode.cn/problems/freedom-trail/) |  ğŸ”´   |

æœ¬æ–‡çš„å°é¢å›¾æ˜¯ä¸€æ¬¾å«åšã€Šè¾å°„4ã€‹çš„æ¸¸æˆä¸­çš„ä¸€ä¸ªä»»åŠ¡å‰§æƒ…ç”»é¢ï¼š

![img](https://labuladong.github.io/algo/images/%E8%BD%AC%E7%9B%98/1.jpg)

è¿™ä¸ªå¯ä»¥è½¬åŠ¨çš„åœ†ç›˜ç±»ä¼¼æ˜¯ä¸€ä¸ªå¯†ç æœºå…³ï¼Œä¸­é—´åä¸Šçš„ä½ç½®æœ‰ä¸ªçº¢è‰²çš„æŒ‡é’ˆçœ‹åˆ°æ²¡ï¼Œä½ åªè¦è½¬åŠ¨åœ†ç›˜å¯ä»¥è®©æŒ‡é’ˆæŒ‡å‘ä¸åŒçš„å­—æ¯ï¼Œç„¶åå†æŒ‰ä¸‹ä¸­é—´çš„æŒ‰é’®å°±å¯ä»¥è¾“å…¥æŒ‡é’ˆæŒ‡å‘çš„å­—æ¯ã€‚

åªè¦è½¬åŠ¨åœ†ç¯ï¼Œè®©æŒ‡é’ˆä¾æ¬¡æŒ‡å‘ Rã€Aã€Iã€Lã€Rã€Oã€Aã€D å¹¶ä¾æ¬¡æŒ‰ä¸‹æŒ‰é’®ï¼Œå°±å¯ä»¥è§¦å‘æœºå…³ï¼Œæ‰“å¼€æ—è¾¹çš„é—¨ã€‚

è‡³äºå¯†ç ä¸ºä»€ä¹ˆæ˜¯è¿™å‡ ä¸ªå­—æ¯ï¼Œåœ¨æ¸¸æˆä¸­çš„å‰§æƒ…æœ‰æš—ç¤ºï¼Œè¿™é‡Œå°±ä¸å¤šè¯´äº†ã€‚

é‚£ä¹ˆè¿™ä¸ªæ¸¸æˆåœºæ™¯å’ŒåŠ¨æ€è§„åˆ’æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ

**æˆ‘ä»¬æ¥æ²¡äº‹å„¿æ‰¾äº‹å„¿åœ°æƒ³ä¸€æƒ³ï¼Œæ‹¨åŠ¨åœ†ç›˜è¾“å…¥è¿™äº›å­—æ¯è¿˜æŒºéº»çƒ¦çš„ï¼ŒæŒ‰ç…§ä»€ä¹ˆé¡ºåºæ‰èƒ½ä½¿å¾—æ‹¨åŠ¨åœ†ç›˜æ‰€éœ€çš„æ“ä½œæ¬¡æ•°æœ€å°‘å‘¢**ï¼Ÿ

æ‹¨åŠ¨åœ†ç›˜çš„ä¸åŒæ–¹æ³•æ‰€éœ€çš„æ“ä½œæ¬¡æ•°è‚¯å®šæ˜¯ä¸åŒçš„ã€‚

æ¯”å¦‚è¯´ä½ æƒ³æŠŠä¸€ä¸ªå­—æ¯å¯¹å‡†åˆ°æŒ‡é’ˆä¸Šï¼Œä½ å¯ä»¥é¡ºæ—¶é’ˆè½¬åœ†ç›˜ï¼Œä¹Ÿå¯ä»¥é€†æ—¶é’ˆè½¬åœ†ç›˜ï¼›è€Œä¸”æŸäº›å­—æ¯å¯èƒ½ä¸æ­¢å‡ºç°ä¸€æ¬¡ï¼Œæ¯”å¦‚ä¸Šå›¾ä¸­å¤§å†™å­—æ¯ O å°±åœ¨åœ†ç›˜çš„ä¸åŒä½ç½®å‡ºç°äº†ä¸‰æ¬¡ï¼Œä½ åˆ°æ—¶å€™åº”è¯¥æ‹¨å“ªä¸ª O æ‰èƒ½ä½¿å¾—æ•´ä½“çš„æ“ä½œæ¬¡æ•°æœ€å°‘å‘¢ï¼Ÿ

æˆ‘ä»¬ä¹‹å‰ä¹Ÿå¤šæ¬¡è¯´è¿‡ï¼Œé‡åˆ°æ±‚æœ€å€¼çš„é—®é¢˜ï¼ŒåŸºæœ¬éƒ½æ˜¯ç”±åŠ¨æ€è§„åˆ’ç®—æ³•æ¥è§£å†³ï¼Œå› ä¸ºåŠ¨æ€è§„åˆ’æœ¬èº«å°±æ˜¯è¿ç­¹ä¼˜åŒ–ç®—æ³•çš„ä¸€ç§å˜›ã€‚

åŠ›æ‰£ä¸Šå°±æœ‰ä¸€é“è¿™ä¸ªè½¬ç›˜æ¸¸æˆçš„ç®—æ³•é¢˜ï¼Œéš¾åº¦è¿˜æ˜¯ Hardï¼Œä½†æˆ‘å½“æ—¶çœ‹äº†ä¸€çœ¼å°±åšå‡ºæ¥äº†ï¼Œå› ä¸ºæˆ‘ä»¥å‰æ€è€ƒè¿‡ç”Ÿæ´»ä¸­ä¸€ä¸ªéå¸¸æœ‰æ„æ€çš„ä¾‹å­å¯ä»¥ç±»æ¯”åˆ°è¿™ä¸ªé—®é¢˜ï¼Œä¸‹é¢æ¥ç®€å•ä»‹ç»ä¸€ä¸‹ã€‚

å…³æ³¨äº†æˆ‘çš„è§†é¢‘å·çš„æœ‹å‹ï¼ŒçŸ¥é“æˆ‘å¼¹è¿‡ææ–¯ç‰¹å’Œè‚–é‚¦çš„å‡ é¦–é’¢ç´æ›²ï¼Œä½†æ˜¯æ²¡ç»ƒè¿‡é’¢ç´çš„è¯»è€…å¯èƒ½ä¸çŸ¥é“ï¼Œç»ƒä¹ é’¢ç´æ›²è°±æ˜¯éœ€è¦æå‰ç¡®å®šã€ŒæŒ‡æ³•ã€çš„ã€‚

äº”çº¿è°±çš„éŸ³ç¬¦ä¸ƒä¸Šå…«ä¸‹çš„ï¼Œä¸¤ä¸ªæ‰‹çš„æ‰‹æŒ‡å¿…é¡»äº’ç›¸é…åˆï¼Œä¹Ÿå°±æ˜¯è¯´ä½ å¿…é¡»ç¡®å®šå¥½æ¯ä¸ªéŸ³ç¬¦ç”¨å“ªåªæ‰‹çš„å“ªä¸ªæ‰‹æŒ‡æ¥å¼¹å¥ï¼Œå†™åˆ°è°±å­ä¸Šã€‚

æ¯”å¦‚è¯´æˆ‘å¾ˆå–œæ¬¢çš„ä¸€é¦–æ›²å­å«åšã€Šçˆ±ä¹‹æ¢¦ã€‹ï¼Œè¿™æ˜¯æˆ‘çš„è°±å­ï¼š

![img](https://labuladong.github.io/algo/images/%E8%BD%AC%E7%9B%98/2.jpg)

éŸ³ç¬¦ä¸Šçš„æ•°å­— 1 ä»£è¡¨ç”¨å¤§æ‹‡æŒ‡ï¼Œ2 ä»£è¡¨ç”¨é£ŸæŒ‡ï¼Œä»¥æ­¤ç±»æ¨ã€‚æŒ‰ç…§ç¡®å®šä¸‹æ¥çš„æŒ‡æ³•ä¸æ–­ç»ƒä¹ ï¼Œå½¢æˆè‚Œè‚‰è®°å¿†ï¼Œå°±ç®—æ˜¯ç»ƒä¼šä¸€é¦–æ›²å­äº†ã€‚

æŒ‡æ³•è¿™ä¸œè¥¿å› äººè€Œå¼‚ï¼Œæ¯”å¦‚æ‰‹å¤§çš„äººå¯ä»¥è®©ä¸­æŒ‡è·¨åˆ°å¤§æ‹‡æŒ‡çš„å·¦è¾¹ï¼Œæ‰‹å°çš„äººå¯èƒ½å°±æœ‰äº›åˆ«æ‰­ï¼Œé‚£åŒä¸€æ®µè°±å­å¯¹åº”çš„æŒ‡æ³•å¯èƒ½å°±ä¸ä¸€æ ·ã€‚

**é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘åº”è¯¥å¦‚ä½•è®¾è®¡æŒ‡æ³•ï¼Œæ‰èƒ½æœ€å°åŒ–æ‰‹æŒ‡åˆ‡æ¢çš„ã€Œåˆ«æ‰­ç¨‹åº¦ã€ï¼Œä¹Ÿå°±æ˜¯æœ€å¤§åŒ–æ¼”å¥çš„æµç•…åº¦å‘¢**ï¼Ÿ

è¿™é‡Œæˆ‘å°±å€ŸåŠ©äº†åŠ¨æ€è§„åˆ’ç®—æ³•æŠ€å·§ï¼šæ‰‹æŒ‡çš„åˆ‡æ¢ä¸å°±æ˜¯çŠ¶æ€çš„è½¬ç§»ä¹ˆï¼Ÿå‚è€ƒå‰æ–‡ [åŠ¨æ€è§„åˆ’å¥—è·¯è¯¦è§£](https://labuladong.github.io/algo/di-ling-zh-bfe1b/dong-tai-g-1e688/)ï¼Œåªè¦æ˜ç¡®ã€ŒçŠ¶æ€ã€å’Œã€Œé€‰æ‹©ã€å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

**çŠ¶æ€æ˜¯ä»€ä¹ˆï¼ŸçŠ¶æ€å°±æ˜¯ã€Œä¸‹ä¸€ä¸ªéœ€è¦å¼¹å¥çš„éŸ³ç¬¦ã€å’Œã€Œå½“å‰çš„æ‰‹çš„çŠ¶æ€ã€**ã€‚

ä¸‹ä¸€ä¸ªéœ€è¦å¼¹å¥çš„éŸ³ç¬¦ï¼Œæ— éå°±æ˜¯é’¢ç´ä¸Š 88 ä¸ªç´é”®ä¸­çš„ä¸€ä¸ªï¼›æ‰‹çš„çŠ¶æ€ä¹Ÿå¾ˆç®€å•ï¼Œäº”ä¸ªæ‰‹æŒ‡å¤´ï¼Œæ¯ä¸ªæ‰‹æŒ‡å¤´è¦ä¹ˆæŒ‰ä¸‹å»äº†è¦ä¹ˆæ²¡æŒ‰ä¸‹å»ï¼Œ2 çš„ 5 æ¬¡æ–¹ 32 ç§æƒ…å†µï¼Œ5 ä¸ªäºŒè¿›åˆ¶ä½å°±å¯ä»¥è¡¨ç¤ºã€‚

**é€‰æ‹©æ˜¯ä»€ä¹ˆï¼Ÿé€‰æ‹©å°±æ˜¯ã€Œä¸‹ä¸€ä¸ªéŸ³ç¬¦åº”è¯¥ç”±å“ªä¸ªæ‰‹æŒ‡å¤´æ¥å¼¹ã€**ï¼Œæ— éå°±æ˜¯ç©·ä¸¾äº”ä¸ªæ‰‹æŒ‡å¤´ã€‚

å½“ç„¶ï¼Œç»“åˆå½“å‰æ‰‹çš„çŠ¶æ€ï¼Œåšå‡ºæ¯ä¸ªé€‰æ‹©éœ€è¦å¯¹åº”ä»£ä»·çš„ï¼Œåˆšæ‰è¯´è¿‡è¿™ä¸ªä»£ä»·æ˜¯å› äººè€Œå¼‚çš„ï¼Œæ‰€ä»¥æˆ‘éœ€è¦ç»™è‡ªå·±å®šåˆ¶ä¸€ä¸ªæŸå¤±å‡½æ•°ï¼Œè®¡ç®—ä¸åŒæŒ‡æ³•åˆ‡æ¢çš„ã€Œåˆ«æ‰­ç¨‹åº¦ã€ã€‚

ç°åœ¨çš„é—®é¢˜å°±å˜æˆäº†ä¸€ä¸ªæ ‡å‡†çš„åŠ¨æ€è§„åˆ’é—®é¢˜ï¼Œæ ¹æ®æŸå¤±å‡½æ•°åšå‡ºã€Œåˆ«æ‰­ç¨‹åº¦ã€æœ€å°çš„é€‰æ‹©ï¼Œä½¿å¾—æ•´æ®µæ¼”å¥æœ€æµç•…â€¦â€¦

å½“ç„¶ï¼Œæœ€åè¿™ä¸ªç®—æ³•æ—¶é—´å¤æ‚åº¦å¤ªé«˜äº†ï¼Œæˆ‘ä»¬åˆšæ‰åˆ†æçš„åªæ˜¯å•ä¸ªçš„éŸ³ç¬¦ï¼Œä½†å¦‚æœä¸²æˆæ›²å­ï¼Œæ—¶ç©ºå¤æ‚åº¦è¿˜å¾—å†ä¹˜æ›²å­çš„éŸ³ç¬¦æ•°ï¼Œå¾ˆå¤§ã€‚

è€Œä¸”ï¼Œè¿™ä¸ªæŸå¤±å‡½æ•°å¾ˆéš¾é‡åŒ–ï¼Œé’¢ç´çš„é»‘ç™½é”®å‘½ä¸­éš¾åº¦ä¸åŒï¼Œè€Œä¸”ã€Œåˆ«æ‰­ç¨‹åº¦ã€åªèƒ½é æ„Ÿè§‰ï¼Œæœ‰ç‚¹ä¸ä¸¥è°¨â€¦â€¦

ä¸è¿‡ï¼Œæœ¬å°±æ²¡å¿…è¦è®¡ç®—æ•´é¦–æ›²å­çš„æŒ‡æ³•ï¼Œåªéœ€è¦è®¡ç®—æŸäº›å¤æ‚æ®µè½çš„æŒ‡æ³•å³å¯ï¼Œè¿™ä¸ªç®—æ³•è¿˜æ˜¯æ¯”è¾ƒæœ‰æ•ˆçš„ã€‚

æ‰¯äº†è¿™ä¹ˆå¤šé¢˜å¤–è¯ç»ˆäºè¦æ­¥å…¥æ­£é¢˜äº†ï¼Œä»Šå¤©è¦è®²çš„åŠ›æ‰£ç¬¬ 514 é¢˜ã€Œ[è‡ªç”±ä¹‹è·¯open in new window](https://leetcode.cn/problems/freedom-trail/)ã€å’Œé’¢ç´æŒ‡æ³•é—®é¢˜æœ‰å¼‚æ›²åŒå·¥ä¹‹å¦™ï¼Œå¦‚æœä½ èƒ½ç†è§£é’¢ç´çš„ä¾‹å­ï¼Œç›¸ä¿¡ä½ ä¹Ÿèƒ½å¾ˆå¿«åšå‡ºè¿™é“ç®—æ³•é¢˜ã€‚

é¢˜ç›®ç»™ä½ è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸² `ring` ä»£è¡¨åœ†ç›˜ä¸Šçš„å­—ç¬¦ï¼ˆæŒ‡é’ˆä½ç½®åœ¨ 12 ç‚¹é’Ÿæ–¹å‘ï¼Œåˆå§‹æŒ‡å‘ `ring[0]`ï¼‰ï¼Œå†è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸² `key` ä»£è¡¨ä½ éœ€è¦æ‹¨åŠ¨åœ†ç›˜è¾“å…¥çš„å­—ç¬¦ä¸²ï¼Œä½ çš„ç®—æ³•éœ€è¦è¿”å›è¾“å…¥è¿™ä¸ª `key` è‡³å°‘è¿›è¡Œå¤šå°‘æ¬¡æ“ä½œï¼ˆæ‹¨åŠ¨ä¸€æ ¼åœ†ç›˜å’ŒæŒ‰ä¸‹åœ†ç›˜ä¸­é—´çš„æŒ‰é’®éƒ½ç®—æ˜¯ä¸€æ¬¡æ“ä½œï¼‰ã€‚

å‡½æ•°ç­¾åå¦‚ä¸‹ï¼š

java ğŸŸ¢cpp ğŸ¤–python ğŸ¤–go ğŸ¤–javascript ğŸ¤–



```java
int findRotateSteps(String ring, String key);
```

æ¯”å¦‚é¢˜ç›®ä¸¾çš„ä¾‹å­ï¼Œè¾“å…¥ `ring = "godding", key = "gd"`ï¼Œå¯¹åº”çš„åœ†ç›˜å¦‚ä¸‹ï¼ˆå¤§å†™åªæ˜¯ä¸ºäº†æ¸…æ™°ï¼Œå®é™…ä¸Šè¾“å…¥çš„å­—ç¬¦ä¸²éƒ½æ˜¯å°å†™å­—æ¯ï¼‰ï¼š

![img](https://labuladong.github.io/algo/images/%E8%BD%AC%E7%9B%98/3.jpg)

æˆ‘ä»¬éœ€è¦è¾“å…¥ `key = "gd"`ï¼Œç®—æ³•è¿”å› 4ã€‚

å› ä¸ºç°åœ¨æŒ‡é’ˆæŒ‡çš„å­—æ¯å°±æ˜¯å­—æ¯ `"g"`ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥æŒ‰ä¸‹ä¸­é—´çš„æŒ‰é’®ï¼Œç„¶åå†å°†åœ†ç›˜é€†æ—¶é’ˆæ‹¨åŠ¨ä¸¤æ ¼ï¼Œè®©æŒ‡é’ˆæŒ‡å‘å­—æ¯ `"d"`ï¼Œç„¶åå†æŒ‰ä¸€æ¬¡ä¸­é—´çš„æŒ‰é’®ã€‚

ä¸Šè¿°è¿‡ç¨‹ï¼ŒæŒ‰äº†ä¸¤æ¬¡æŒ‰é’®ï¼Œæ‹¨äº†ä¸¤æ ¼è½¬ç›˜ï¼Œæ€»å…±æ“ä½œäº† 4 æ¬¡ï¼Œæ˜¯æœ€å°‘çš„æ“ä½œæ¬¡æ•°ï¼Œæ‰€ä»¥ç®—æ³•åº”è¯¥è¿”å› 4ã€‚

æˆ‘ä»¬è¿™é‡Œå¯ä»¥é¦–å…ˆç»™é¢˜ç›®åšä¸€ä¸ªç­‰ä»·ï¼Œè½¬åŠ¨åœ†ç›˜æ˜¯ä¸æ˜¯å°±ç­‰äºæ‹¨åŠ¨æŒ‡é’ˆï¼Ÿ

**åŸé¢˜å¯ä»¥è½¬åŒ–ä¸ºï¼šåœ†ç›˜å›ºå®šï¼Œæˆ‘ä»¬å¯ä»¥æ‹¨åŠ¨æŒ‡é’ˆï¼›ç°åœ¨éœ€è¦æˆ‘ä»¬æ‹¨åŠ¨æŒ‡é’ˆå¹¶æŒ‰ä¸‹æŒ‰é’®ï¼Œä»¥æœ€å°‘çš„æ“ä½œæ¬¡æ•°è¾“å…¥ `key` å¯¹åº”çš„å­—ç¬¦ä¸²**ã€‚

é‚£ä¹ˆï¼Œè¿™ä¸ªé—®é¢˜å¦‚ä½•ä½¿ç”¨åŠ¨æ€è§„åˆ’çš„æŠ€å·§è§£å†³å‘¢ï¼Ÿæˆ–è€…è¯´ï¼Œè¿™é“é¢˜çš„ã€ŒçŠ¶æ€ã€å’Œã€Œé€‰æ‹©ã€æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ

**ã€ŒçŠ¶æ€ã€å°±æ˜¯ã€Œå½“å‰éœ€è¦è¾“å…¥çš„å­—ç¬¦ã€å’Œã€Œå½“å‰åœ†ç›˜æŒ‡é’ˆçš„ä½ç½®ã€**ã€‚

å†å…·ä½“ç‚¹ï¼Œã€ŒçŠ¶æ€ã€å°±æ˜¯ `i` å’Œ `j` ä¸¤ä¸ªå˜é‡ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ `i` è¡¨ç¤ºå½“å‰åœ†ç›˜ä¸ŠæŒ‡é’ˆæŒ‡å‘çš„å­—ç¬¦ï¼ˆä¹Ÿå°±æ˜¯ `ring[i]`ï¼‰ï¼›ç”¨ `j` è¡¨ç¤ºéœ€è¦è¾“å…¥çš„å­—ç¬¦ï¼ˆä¹Ÿå°±æ˜¯ `key[j]`ï¼‰ã€‚

è¿™æ ·æˆ‘ä»¬å¯ä»¥å†™è¿™æ ·ä¸€ä¸ª `dp` å‡½æ•°ï¼š

java ğŸŸ¢cpp ğŸ¤–python ğŸ¤–go ğŸ¤–javascript ğŸ¤–



```java
int dp(String ring, int i, String key, int j);
```

è¿™ä¸ª `dp` å‡½æ•°çš„å®šä¹‰å¦‚ä¸‹ï¼š

**å½“åœ†ç›˜æŒ‡é’ˆæŒ‡å‘ `ring[i]` æ—¶ï¼Œè¾“å…¥å­—ç¬¦ä¸² `key[j..]` è‡³å°‘éœ€è¦ `dp(ring, i, key, j)` æ¬¡æ“ä½œ**ã€‚

æ ¹æ®è¿™ä¸ªå®šä¹‰ï¼Œé¢˜ç›®å…¶å®å°±æ˜¯æƒ³è®¡ç®— `dp(ring, 0, key, 0)` çš„å€¼ï¼Œè€Œä¸”æˆ‘ä»¬å¯ä»¥æŠŠ `dp` å‡½æ•°çš„ base case å†™å‡ºæ¥ï¼š

java ğŸŸ¢cpp ğŸ¤–python ğŸ¤–go ğŸ¤–javascript ğŸ¤–



```java
int dp(String ring, int i, String, int j) {
    // base caseï¼Œå®Œæˆè¾“å…¥
    if (j == key.length()) return 0;
    // ...
}
```

æ¥ä¸‹æ¥ï¼Œæ€è€ƒä¸€ä¸‹å¦‚ä½•æ ¹æ®çŠ¶æ€åšé€‰æ‹©ï¼Œå¦‚ä½•è¿›è¡ŒçŠ¶æ€è½¬ç§»ï¼Ÿ

**ã€Œé€‰æ‹©ã€å°±æ˜¯ã€Œå¦‚ä½•æ‹¨åŠ¨æŒ‡é’ˆå¾—åˆ°å¾…è¾“å…¥çš„å­—ç¬¦ã€**ã€‚

å†å…·ä½“ç‚¹å°±æ˜¯ï¼Œå¯¹äºç°åœ¨æƒ³è¾“å…¥çš„å­—ç¬¦ `key[j]`ï¼Œæˆ‘ä»¬å¯ä»¥å¦‚ä½•æ‹¨åŠ¨åœ†ç›˜ï¼Œå¾—åˆ°è¿™ä¸ªå­—ç¬¦ï¼Ÿ

æ¯”å¦‚è¯´è¾“å…¥ `ring = "gdonidg"`ï¼Œç°åœ¨åœ†ç›˜çš„çŠ¶æ€å¦‚ä¸‹å›¾ï¼š

![img](https://labuladong.github.io/algo/images/%E8%BD%AC%E7%9B%98/4.jpeg)

å‡è®¾æˆ‘æƒ³è¾“å…¥çš„å­—ç¬¦ `key[j] = "d"`ï¼Œåœ†ç›˜ä¸­æœ‰ä¸¤ä¸ªå­—æ¯ `"d"`ï¼Œè€Œä¸”æˆ‘å¯ä»¥é¡ºæ—¶é’ˆä¹Ÿå¯ä»¥é€†æ—¶é’ˆæ‹¨åŠ¨æŒ‡é’ˆï¼Œæ‰€ä»¥æ€»å…±æœ‰å››ç§ã€Œé€‰æ‹©ã€è¾“å…¥å­—ç¬¦ `"d"`ï¼Œæˆ‘ä»¬éœ€è¦é€‰æ‹©æ“ä½œæ¬¡æ•°æœ€å°‘çš„é‚£ä¸ªæ‹¨æ³•ã€‚

å¤§è‡´çš„ä»£ç é€»è¾‘å¦‚ä¸‹ï¼š

java ğŸŸ¢cpp ğŸ¤–python ğŸ¤–go ğŸ¤–javascript ğŸ¤–



```java
int dp(String ring, int i, String, int j) {
    // base case å®Œæˆè¾“å…¥
    if (j == key.length()) return 0;
    
    // åšé€‰æ‹©
    int res = Integer.MAX_VALUE;
    for (int k : [å­—ç¬¦ key[j] åœ¨ ring ä¸­çš„æ‰€æœ‰ç´¢å¼•]) {
        res = min(
            æŠŠ i é¡ºæ—¶é’ˆè½¬åˆ° k çš„ä»£ä»·,
            æŠŠ i é€†æ—¶é’ˆè½¬åˆ° k çš„ä»£ä»·
        );
    }
    
    return res;
}
```

è‡³äºåˆ°åº•æ˜¯é¡ºæ—¶é’ˆè¿˜æ˜¯é€†æ—¶é’ˆï¼Œå…¶å®éå¸¸å¥½åˆ¤æ–­ï¼Œæ€ä¹ˆè¿‘å°±æ€ä¹ˆæ¥ï¼›ä½†æ˜¯å¯¹äºåœ†ç›˜ä¸­çš„ä¸¤ä¸ªå­—ç¬¦ `"d"`ï¼Œè¿˜èƒ½æ˜¯æ€ä¹ˆè¿‘æ€ä¹ˆæ¥å—ï¼Ÿ

ä¸èƒ½ï¼Œå› ä¸ºè¿™å’Œ `key[i]` ä¹‹åéœ€è¦è¾“å…¥çš„å­—ç¬¦æœ‰å…³ï¼Œè¿˜æ˜¯ä¸Šé¢çš„ä¾‹å­ï¼š

![img](https://labuladong.github.io/algo/images/%E8%BD%AC%E7%9B%98/4.jpeg)

å¦‚æœè¾“å…¥çš„æ˜¯ `key = "di"`ï¼Œé‚£ä¹ˆå³ä¾¿å³è¾¹çš„ `"d"` ç¦»å¾—è¿‘ï¼Œä¹Ÿåº”è¯¥å»å·¦è¾¹çš„ `"d"`ï¼Œå› ä¸ºå·¦è¾¹çš„ `"d"` æ—è¾¹å°±æ˜¯ `"i"`ï¼Œã€Œæ•´ä½“ã€çš„æ“ä½œæ•°æœ€å°‘ã€‚

é‚£ä¹ˆï¼Œåº”è¯¥å¦‚ä½•åˆ¤æ–­å‘¢ï¼Ÿå…¶å®å°±æ˜¯ç©·ä¸¾ï¼Œé€’å½’è°ƒç”¨ `dp` å‡½æ•°ï¼ŒæŠŠä¸¤ç§é€‰æ‹©çš„ã€Œæ•´ä½“ã€ä»£ä»·ç®—å‡ºæ¥ï¼Œç„¶åå†åšæ¯”è¾ƒå°±è¡Œäº†ã€‚

è®²åˆ°è¿™å°±å·®ä¸å¤šäº†ï¼Œç›´æ¥çœ‹ä»£ç å§ï¼š

java ğŸŸ¢cpp ğŸ¤–python ğŸ¤–go ğŸ¤–javascript ğŸ¤–



```java
class Solution {
    // å­—ç¬¦ -> ç´¢å¼•åˆ—è¡¨
    HashMap<Character, List<Integer>> charToIndex = new HashMap<>();
    // å¤‡å¿˜å½•
    int[][] memo;

    /* ä¸»å‡½æ•° */
    public int findRotateSteps(String ring, String key) {
        int m = ring.length();
        int n = key.length();
        // å¤‡å¿˜å½•å…¨éƒ¨åˆå§‹åŒ–ä¸º 0
        memo = new int[m][n];
        // è®°å½•åœ†ç¯ä¸Šå­—ç¬¦åˆ°ç´¢å¼•çš„æ˜ å°„
        for (int i = 0; i < ring.length(); i++) {
            char c = ring.charAt(i);
            if (!charToIndex.containsKey(c)) {
                charToIndex.put(c, new LinkedList<>());
            }
            charToIndex.get(c).add(i);
        }
        // åœ†ç›˜æŒ‡é’ˆæœ€åˆæŒ‡å‘ 12 ç‚¹é’Ÿæ–¹å‘ï¼Œ
        // ä»ç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹è¾“å…¥ key
        return dp(ring, 0, key, 0);
    }

    // è®¡ç®—åœ†ç›˜æŒ‡é’ˆåœ¨ ring[i]ï¼Œè¾“å…¥ key[j..] çš„æœ€å°‘æ“ä½œæ•°
    int dp(String ring, int i, String key, int j) {
        // base case å®Œæˆè¾“å…¥
        if (j == key.length()) return 0;
        // æŸ¥æ‰¾å¤‡å¿˜å½•ï¼Œé¿å…é‡å å­é—®é¢˜
        if (memo[i][j] != 0) return memo[i][j];
        
        int n = ring.length();
        // åšé€‰æ‹©
        int res = Integer.MAX_VALUE;
        // ring ä¸Šå¯èƒ½æœ‰å¤šä¸ªå­—ç¬¦ key[j]
        for (int k : charToIndex.get(key.charAt(j))) {
            // æ‹¨åŠ¨æŒ‡é’ˆçš„æ¬¡æ•°
            int delta = Math.abs(k - i);
            // é€‰æ‹©é¡ºæ—¶é’ˆè¿˜æ˜¯é€†æ—¶é’ˆ
            delta = Math.min(delta, n - delta);
            // å°†æŒ‡é’ˆæ‹¨åˆ° ring[k]ï¼Œç»§ç»­è¾“å…¥ key[j+1..]
            int subProblem = dp(ring, k, key, j + 1);
            // é€‰æ‹©ã€Œæ•´ä½“ã€æ“ä½œæ¬¡æ•°æœ€å°‘çš„
            // åŠ ä¸€æ˜¯å› ä¸ºæŒ‰åŠ¨æŒ‰é’®ä¹Ÿæ˜¯ä¸€æ¬¡æ“ä½œ
            res = Math.min(res, 1 + delta + subProblem);
        }
        // å°†ç»“æœå­˜å…¥å¤‡å¿˜å½•
        memo[i][j] = res;
        return res;
    }
}
```

<details data-v-4fb811c9="" id="div_freedom-trail" class="hint-container details" style="position: relative; transition: background var(--vp-tt),color var(--vp-tt); display: block; margin: 1.6em 0px; padding: 1rem 0px 0px; border-radius: 0.5rem; background: var(--detail-bg-color); color: var(--detail-text-color);"><summary data-v-4fb811c9="" style="position: relative; margin: -1.5rem 0px -0.5rem; padding-top: 1.5rem; padding-bottom: 1.5rem; padding-inline: 4rem 1.5rem; list-style: none; cursor: pointer; display: flex; align-items: center; font-size: large;"><strong data-v-4fb811c9="" style="font-weight: 600;">ğŸƒ ä»£ç å¯è§†åŒ–åŠ¨ç”» ğŸƒ</strong><span data-v-4fb811c9="" class="font-icon icon iconfont icon-resize" style="display: inline-block; font-size: 16px; font-style: normal; -webkit-font-smoothing: antialiased; font-family: iconfont !important; vertical-align: middle; margin-left: auto; margin-right: 10px;"></span><span data-v-4fb811c9="" class="font-icon icon iconfont icon-refresh" style="display: inline-block; font-size: 16px; font-style: normal; -webkit-font-smoothing: antialiased; font-family: iconfont !important; vertical-align: middle; margin-right: 10px;"></span><span data-v-4fb811c9="" class="font-icon icon iconfont icon-link" style="display: inline-block; font-size: 16px; font-style: normal; -webkit-font-smoothing: antialiased; font-family: iconfont !important; vertical-align: middle;"></span></summary><div data-v-4fb811c9="" class="resizable" style="width: 752px; max-width: 100%; height: 70vh; max-height: 70vh; overflow: auto; resize: both;"><iframe data-v-4fb811c9="" id="iframe_freedom-trail" src="https://labuladong.github.io/algo-visualize/" width="100%" height="100%" loading="lazy" scrolling="auto" frameborder="0" style="overflow: auto;"></iframe></div></details>

è¿™æ®µä»£ç æ˜¯ C++ å†™çš„ï¼Œå› ä¸ºæˆ‘è§‰å¾—æ¶‰åŠå­—ç¬¦ä¸²çš„ç®—æ³• C++ æ›´æ–¹ä¾¿ä¸€äº›ï¼Œè¿™é‡Œè¯´ä¸€äº›è¯­è¨€ç›¸å…³çš„ç»†èŠ‚é—®é¢˜ï¼š

1ã€`unordered_map` å°±æ˜¯å“ˆå¸Œè¡¨ï¼Œå½“è®¿é—®ä¸å­˜åœ¨çš„é”®æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºå¯¹åº”çš„å€¼ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ `push_back` è€Œä¸ç”¨æ‹…å¿ƒç©ºæŒ‡é’ˆé”™è¯¯ã€‚

2ã€`min` å‡½æ•°çš„å‚æ•°éƒ½æ˜¯ int å‹ï¼Œæ‰€ä»¥å¿…é¡»å…ˆç”¨ä¸€ä¸ª int å‹å˜é‡ `n` å­˜å‚¨ `ring.size()`ï¼Œç„¶åè°ƒç”¨ `min(delta, n - delta)`ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚

è‡³æ­¤ï¼Œè¿™é“é¢˜å°±è§£å†³äº†ã€‚