# ç»å…¸å›æº¯ç®—æ³•ï¼šé›†åˆåˆ’åˆ†é—®é¢˜

è¯»å®Œæœ¬æ–‡ï¼Œä½ ä¸ä»…å­¦ä¼šäº†ç®—æ³•å¥—è·¯ï¼Œè¿˜å¯ä»¥é¡ºä¾¿è§£å†³å¦‚ä¸‹é¢˜ç›®ï¼š

|                           LeetCode                           |                             åŠ›æ‰£                             | éš¾åº¦ |
| :----------------------------------------------------------: | :----------------------------------------------------------: | :--: |
| [698. Partition to K Equal Sum Subsets](https://leetcode.com/problems/partition-to-k-equal-sum-subsets/) | [698. åˆ’åˆ†ä¸ºkä¸ªç›¸ç­‰çš„å­é›†](https://leetcode.cn/problems/partition-to-k-equal-sum-subsets/) |  ğŸŸ    |

**â€”â€”â€”â€“**

ä¹‹å‰è¯´è¿‡å›æº¯ç®—æ³•æ˜¯ç¬”è¯•ä¸­æœ€å¥½ç”¨çš„ç®—æ³•ï¼Œåªè¦ä½ æ²¡ä»€ä¹ˆæ€è·¯ï¼Œå°±ç”¨å›æº¯ç®—æ³•æš´åŠ›æ±‚è§£ï¼Œå³ä¾¿ä¸èƒ½é€šè¿‡æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ï¼Œå¤šå°‘èƒ½è¿‡ä¸€ç‚¹ã€‚

å›æº¯ç®—æ³•çš„æŠ€å·§ä¹Ÿä¸éš¾ï¼Œå‰æ–‡ [å›æº¯ç®—æ³•æ¡†æ¶å¥—è·¯](https://labuladong.github.io/algo/di-san-zha-24031/bao-li-sou-96f79/hui-su-sua-c26da/) è¯´è¿‡ï¼Œå›æº¯ç®—æ³•å°±æ˜¯ç©·ä¸¾ä¸€æ£µå†³ç­–æ ‘çš„è¿‡ç¨‹ï¼Œåªè¦åœ¨é€’å½’ä¹‹å‰ã€Œåšé€‰æ‹©ã€ï¼Œåœ¨é€’å½’ä¹‹åã€Œæ’¤é”€é€‰æ‹©ã€å°±è¡Œäº†ã€‚

**ä½†æ˜¯ï¼Œå°±ç®—æš´åŠ›ç©·ä¸¾ï¼Œä¸åŒçš„æ€è·¯ä¹Ÿæœ‰ä¼˜åŠ£ä¹‹åˆ†**ã€‚

æœ¬æ–‡å°±æ¥çœ‹ä¸€é“éå¸¸ç»å…¸çš„å›æº¯ç®—æ³•é—®é¢˜ï¼ŒåŠ›æ‰£ç¬¬ 698 é¢˜ã€Œ [åˆ’åˆ†ä¸ºkä¸ªç›¸ç­‰çš„å­é›†](https://leetcode.cn/problems/partition-to-k-equal-sum-subsets/)ã€ã€‚è¿™é“é¢˜å¯ä»¥å¸®ä½ æ›´æ·±åˆ»ç†è§£å›æº¯ç®—æ³•çš„æ€ç»´ï¼Œå¾—å¿ƒåº”æ‰‹åœ°å†™å‡ºå›æº¯å‡½æ•°ã€‚

é¢˜ç›®éå¸¸ç®€å•ï¼š

ç»™ä½ è¾“å…¥ä¸€ä¸ªæ•°ç»„ `nums` å’Œä¸€ä¸ªæ­£æ•´æ•° `k`ï¼Œè¯·ä½ åˆ¤æ–­ `nums` æ˜¯å¦èƒ½å¤Ÿè¢«å¹³åˆ†ä¸ºå…ƒç´ å’Œç›¸åŒçš„ `k` ä¸ªå­é›†ã€‚

å‡½æ•°ç­¾åå¦‚ä¸‹ï¼š

```java
boolean canPartitionKSubsets(int[] nums, int k);
```

æˆ‘ä»¬ä¹‹å‰ [èƒŒåŒ…é—®é¢˜ä¹‹å­é›†åˆ’åˆ†](https://labuladong.github.io/algo/di-er-zhan-a01c6/bei-bao-le-34bd4/jing-dian--fbd43/) å†™è¿‡ä¸€æ¬¡å­é›†åˆ’åˆ†é—®é¢˜ï¼Œä¸è¿‡é‚£é“é¢˜åªéœ€è¦æˆ‘ä»¬æŠŠé›†åˆåˆ’åˆ†æˆä¸¤ä¸ªç›¸ç­‰çš„é›†åˆï¼Œå¯ä»¥è½¬åŒ–æˆèƒŒåŒ…é—®é¢˜ç”¨åŠ¨æ€è§„åˆ’æŠ€å·§è§£å†³ã€‚

> æ€è€ƒé¢˜ï¼šä¸ºä»€ä¹ˆåˆ’åˆ†æˆä¸¤ä¸ªç›¸ç­‰çš„å­é›†å¯ä»¥è½¬åŒ–æˆèƒŒåŒ…é—®é¢˜ç”¨åŠ¨æ€è§„åˆ’æ€è·¯è§£å†³ï¼Œè€Œåˆ’åˆ†æˆ `k` ä¸ªç›¸ç­‰çš„å­é›†å°±ä¸å¯ä»¥è½¬åŒ–æˆèƒŒåŒ…é—®é¢˜ï¼Œåªèƒ½ç”¨å›æº¯ç®—æ³•æš´åŠ›ç©·ä¸¾ï¼Ÿè¯·å…ˆå°è¯•è‡ªå·±æ€è€ƒï¼Œæˆ‘ä¼šåœ¨æ–‡æœ«ç»™å‡ºç­”æ¡ˆã€‚

ä½†æ˜¯å¦‚æœåˆ’åˆ†æˆå¤šä¸ªç›¸ç­‰çš„é›†åˆï¼Œè§£æ³•ä¸€èˆ¬åªèƒ½é€šè¿‡æš´åŠ›ç©·ä¸¾ï¼Œæ—¶é—´å¤æ‚åº¦çˆ†è¡¨ï¼Œæ˜¯ç»ƒä¹ å›æº¯ç®—æ³•å’Œé€’å½’æ€ç»´çš„å¥½æœºä¼šã€‚

### ä¸€ã€æ€è·¯åˆ†æ

é¦–å…ˆï¼Œæˆ‘ä»¬å›é¡¾ä¸€ä¸‹ä»¥å‰å­¦è¿‡çš„æ’åˆ—ç»„åˆçŸ¥è¯†ï¼š

1ã€`P(n, k)`ï¼ˆä¹Ÿæœ‰å¾ˆå¤šä¹¦å†™æˆ `A(n, k)`ï¼‰è¡¨ç¤ºä» `n` ä¸ªä¸åŒå…ƒç´ ä¸­æ‹¿å‡º `k` ä¸ªå…ƒç´ çš„æ’åˆ—ï¼ˆPermutation/Arrangementï¼‰ï¼›`C(n, k)` è¡¨ç¤ºä» `n` ä¸ªä¸åŒå…ƒç´ ä¸­æ‹¿å‡º `k` ä¸ªå…ƒç´ çš„ç»„åˆï¼ˆCombinationï¼‰æ€»æ•°ã€‚

2ã€ã€Œæ’åˆ—ã€å’Œã€Œç»„åˆã€çš„ä¸»è¦åŒºåˆ«åœ¨äºæ˜¯å¦è€ƒè™‘é¡ºåºçš„å·®å¼‚ã€‚

3ã€æ’åˆ—ã€ç»„åˆæ€»æ•°çš„è®¡ç®—å…¬å¼ï¼š

[![img](https://labuladong.github.io/algo/images/%e9%9b%86%e5%90%88%e5%88%92%e5%88%86/math.png)](https://labuladong.github.io/algo/images/é›†åˆåˆ’åˆ†/math.png)

å¥½ï¼Œç°åœ¨æˆ‘é—®ä¸€ä¸ªé—®é¢˜ï¼Œè¿™ä¸ªæ’åˆ—å…¬å¼ `P(n, k)` æ˜¯å¦‚ä½•æ¨å¯¼å‡ºæ¥çš„ï¼Ÿä¸ºäº†ææ¸…æ¥šè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘éœ€è¦è®²ä¸€ç‚¹ç»„åˆæ•°å­¦çš„çŸ¥è¯†ã€‚

æ’åˆ—ç»„åˆé—®é¢˜çš„å„ç§å˜ä½“éƒ½å¯ä»¥æŠ½è±¡æˆã€Œçƒç›’æ¨¡å‹ã€ï¼Œ`P(n, k)` å°±å¯ä»¥æŠ½è±¡æˆä¸‹é¢è¿™ä¸ªåœºæ™¯ï¼š

[![img](https://labuladong.github.io/algo/images/%e9%9b%86%e5%90%88%e5%88%92%e5%88%86/7.jpeg)](https://labuladong.github.io/algo/images/é›†åˆåˆ’åˆ†/7.jpeg)

å³ï¼Œå°† `n` ä¸ªæ ‡è®°äº†ä¸åŒåºå·çš„çƒï¼ˆæ ‡å·ä¸ºäº†ä½“ç°é¡ºåºçš„å·®å¼‚ï¼‰ï¼Œæ”¾å…¥ `k` ä¸ªæ ‡è®°äº†ä¸åŒåºå·çš„ç›’å­ä¸­ï¼ˆå…¶ä¸­ `n >= k`ï¼Œæ¯ä¸ªç›’å­æœ€ç»ˆéƒ½è£…æœ‰æ°å¥½ä¸€ä¸ªçƒï¼‰ï¼Œå…±æœ‰ `P(n, k)` ç§ä¸åŒçš„æ–¹æ³•ã€‚

ç°åœ¨ä½ æ¥ï¼Œå¾€ç›’å­é‡Œæ”¾çƒï¼Œä½ æ€ä¹ˆæ”¾ï¼Ÿå…¶å®æœ‰ä¸¤ç§è§†è§’ã€‚

**é¦–å…ˆï¼Œä½ å¯ä»¥ç«™åœ¨ç›’å­çš„è§†è§’**ï¼Œæ¯ä¸ªç›’å­å¿…ç„¶è¦é€‰æ‹©ä¸€ä¸ªçƒã€‚

è¿™æ ·ï¼Œç¬¬ä¸€ä¸ªç›’å­å¯ä»¥é€‰æ‹© `n` ä¸ªçƒä¸­çš„ä»»æ„ä¸€ä¸ªï¼Œç„¶åä½ éœ€è¦è®©å‰©ä¸‹ `k - 1` ä¸ªç›’å­åœ¨ `n - 1` ä¸ªçƒä¸­é€‰æ‹©ï¼š

[![img](https://labuladong.github.io/algo/images/%e9%9b%86%e5%90%88%e5%88%92%e5%88%86/8.jpeg)](https://labuladong.github.io/algo/images/é›†åˆåˆ’åˆ†/8.jpeg)

**å¦å¤–ï¼Œä½ ä¹Ÿå¯ä»¥ç«™åœ¨çƒçš„è§†è§’**ï¼Œå› ä¸ºå¹¶ä¸æ˜¯æ¯ä¸ªçƒéƒ½ä¼šè¢«è£…è¿›ç›’å­ï¼Œæ‰€ä»¥çƒçš„è§†è§’åˆ†ä¸¤ç§æƒ…å†µï¼š

1ã€ç¬¬ä¸€ä¸ªçƒå¯ä»¥ä¸è£…è¿›ä»»ä½•ä¸€ä¸ªç›’å­ï¼Œè¿™æ ·çš„è¯ä½ å°±éœ€è¦å°†å‰©ä¸‹ `n - 1` ä¸ªçƒæ”¾å…¥ `k` ä¸ªç›’å­ã€‚

2ã€ç¬¬ä¸€ä¸ªçƒå¯ä»¥è£…è¿› `k` ä¸ªç›’å­ä¸­çš„ä»»æ„ä¸€ä¸ªï¼Œè¿™æ ·çš„è¯ä½ å°±éœ€è¦å°†å‰©ä¸‹ `n - 1` ä¸ªçƒæ”¾å…¥ `k - 1` ä¸ªç›’å­ã€‚

ç»“åˆä¸Šè¿°ä¸¤ç§æƒ…å†µï¼Œå¯ä»¥å¾—åˆ°ï¼š

[![img](https://labuladong.github.io/algo/images/%e9%9b%86%e5%90%88%e5%88%92%e5%88%86/9.jpeg)](https://labuladong.github.io/algo/images/é›†åˆåˆ’åˆ†/9.jpeg)

ä½ çœ‹ï¼Œä¸¤ç§è§†è§’å¾—åˆ°ä¸¤ä¸ªä¸åŒçš„é€’å½’å¼ï¼Œä½†è¿™ä¸¤ä¸ªé€’å½’å¼è§£å¼€çš„ç»“æœéƒ½æ˜¯æˆ‘ä»¬ç†ŸçŸ¥çš„é˜¶ä¹˜å½¢å¼ï¼š

[![img](https://labuladong.github.io/algo/images/%e9%9b%86%e5%90%88%e5%88%92%e5%88%86/math1.png)](https://labuladong.github.io/algo/images/é›†åˆåˆ’åˆ†/math1.png)

è‡³äºå¦‚ä½•è§£é€’å½’å¼ï¼Œæ¶‰åŠæ•°å­¦çš„å†…å®¹æ¯”è¾ƒå¤šï¼Œè¿™é‡Œå°±ä¸åšæ·±å…¥æ¢è®¨äº†ï¼Œæœ‰å…´è¶£çš„è¯»è€…å¯ä»¥è‡ªè¡Œå­¦ä¹ ç»„åˆæ•°å­¦ç›¸å…³çŸ¥è¯†ã€‚

å›åˆ°æ­£é¢˜ï¼Œè¿™é“ç®—æ³•é¢˜è®©æˆ‘ä»¬æ±‚å­é›†åˆ’åˆ†ï¼Œå­é›†é—®é¢˜å’Œæ’åˆ—ç»„åˆé—®é¢˜æœ‰æ‰€åŒºåˆ«ï¼Œä½†æˆ‘ä»¬å¯ä»¥å€Ÿé‰´ã€Œçƒç›’æ¨¡å‹ã€çš„æŠ½è±¡ï¼Œç”¨ä¸¤ç§ä¸åŒçš„è§†è§’æ¥è§£å†³è¿™é“å­é›†åˆ’åˆ†é—®é¢˜ã€‚

æŠŠè£…æœ‰ `n` ä¸ªæ•°å­—çš„æ•°ç»„ `nums` åˆ†æˆ `k` ä¸ªå’Œç›¸åŒçš„é›†åˆï¼Œä½ å¯ä»¥æƒ³è±¡å°† `n` ä¸ªæ•°å­—åˆ†é…åˆ° `k` ä¸ªã€Œæ¡¶ã€é‡Œï¼Œæœ€åè¿™ `k` ä¸ªã€Œæ¡¶ã€é‡Œçš„æ•°å­—ä¹‹å’Œè¦ç›¸åŒã€‚

å‰æ–‡ [å›æº¯ç®—æ³•æ¡†æ¶å¥—è·¯](https://labuladong.github.io/algo/di-san-zha-24031/bao-li-sou-96f79/hui-su-sua-c26da/) è¯´è¿‡ï¼Œå›æº¯ç®—æ³•çš„å…³é”®åœ¨å“ªé‡Œï¼Ÿ

å…³é”®æ˜¯è¦çŸ¥é“æ€ä¹ˆã€Œåšé€‰æ‹©ã€ï¼Œè¿™æ ·æ‰èƒ½åˆ©ç”¨é€’å½’å‡½æ•°è¿›è¡Œç©·ä¸¾ã€‚

é‚£ä¹ˆæ¨¡ä»¿æ’åˆ—å…¬å¼çš„æ¨å¯¼æ€è·¯ï¼Œå°† `n` ä¸ªæ•°å­—åˆ†é…åˆ° `k` ä¸ªæ¡¶é‡Œï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æœ‰ä¸¤ç§è§†è§’ï¼š

**è§†è§’ä¸€ï¼Œå¦‚æœæˆ‘ä»¬åˆ‡æ¢åˆ°è¿™ `n` ä¸ªæ•°å­—çš„è§†è§’ï¼Œæ¯ä¸ªæ•°å­—éƒ½è¦é€‰æ‹©è¿›å…¥åˆ° `k` ä¸ªæ¡¶ä¸­çš„æŸä¸€ä¸ª**ã€‚

[![img](https://labuladong.github.io/algo/images/%e9%9b%86%e5%90%88%e5%88%92%e5%88%86/5.jpeg)](https://labuladong.github.io/algo/images/é›†åˆåˆ’åˆ†/5.jpeg)

**è§†è§’äºŒï¼Œå¦‚æœæˆ‘ä»¬åˆ‡æ¢åˆ°è¿™ `k` ä¸ªæ¡¶çš„è§†è§’ï¼Œå¯¹äºæ¯ä¸ªæ¡¶ï¼Œéƒ½è¦éå† `nums` ä¸­çš„ `n` ä¸ªæ•°å­—ï¼Œç„¶åé€‰æ‹©æ˜¯å¦å°†å½“å‰éå†åˆ°çš„æ•°å­—è£…è¿›è‡ªå·±è¿™ä¸ªæ¡¶é‡Œ**ã€‚

[![img](https://labuladong.github.io/algo/images/%e9%9b%86%e5%90%88%e5%88%92%e5%88%86/6.jpeg)](https://labuladong.github.io/algo/images/é›†åˆåˆ’åˆ†/6.jpeg)

ä½ å¯èƒ½é—®ï¼Œè¿™ä¸¤ç§è§†è§’æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ

**ç”¨ä¸åŒçš„è§†è§’è¿›è¡Œç©·ä¸¾ï¼Œè™½ç„¶ç»“æœç›¸åŒï¼Œä½†æ˜¯è§£æ³•ä»£ç çš„é€»è¾‘å®Œå…¨ä¸åŒï¼Œè¿›è€Œç®—æ³•çš„æ•ˆç‡ä¹Ÿä¼šä¸åŒï¼›å¯¹æ¯”ä¸åŒçš„ç©·ä¸¾è§†è§’ï¼Œå¯ä»¥å¸®ä½ æ›´æ·±åˆ»åœ°ç†è§£å›æº¯ç®—æ³•ï¼Œæˆ‘ä»¬æ…¢æ…¢é“æ¥**ã€‚

### äºŒã€ä»¥æ•°å­—çš„è§†è§’

ç”¨ for å¾ªç¯è¿­ä»£éå† `nums` æ•°ç»„å¤§å®¶è‚¯å®šéƒ½ä¼šï¼š

```java
for (int index = 0; index < nums.length; index++) {
    System.out.println(nums[index]);
}
```

é€’å½’éå†æ•°ç»„ä½ ä¼šä¸ä¼šï¼Ÿå…¶å®ä¹Ÿå¾ˆç®€å•ï¼š

```java
void traverse(int[] nums, int index) {
    if (index == nums.length) {
        return;
    }
    System.out.println(nums[index]);
    traverse(nums, index + 1);
}
```

åªè¦è°ƒç”¨ `traverse(nums, 0)`ï¼Œå’Œ for å¾ªç¯çš„æ•ˆæœæ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚

é‚£ä¹ˆå›åˆ°è¿™é“é¢˜ï¼Œä»¥æ•°å­—çš„è§†è§’ï¼Œé€‰æ‹© `k` ä¸ªæ¡¶ï¼Œç”¨ for å¾ªç¯å†™å‡ºæ¥æ˜¯ä¸‹é¢è¿™æ ·ï¼š

```java
// k ä¸ªæ¡¶ï¼ˆé›†åˆï¼‰ï¼Œè®°å½•æ¯ä¸ªæ¡¶è£…çš„æ•°å­—ä¹‹å’Œ
int[] bucket = new int[k];

// ç©·ä¸¾ nums ä¸­çš„æ¯ä¸ªæ•°å­—
for (int index = 0; index < nums.length; index++) {
    // ç©·ä¸¾æ¯ä¸ªæ¡¶
    for (int i = 0; i < k; i++) {
        // nums[index] é€‰æ‹©æ˜¯å¦è¦è¿›å…¥ç¬¬ i ä¸ªæ¡¶
        // ...
    }
}
```

å¦‚æœæ”¹æˆé€’å½’çš„å½¢å¼ï¼Œå°±æ˜¯ä¸‹é¢è¿™æ®µä»£ç é€»è¾‘ï¼š

```java
// k ä¸ªæ¡¶ï¼ˆé›†åˆï¼‰ï¼Œè®°å½•æ¯ä¸ªæ¡¶è£…çš„æ•°å­—ä¹‹å’Œ
int[] bucket = new int[k];

// ç©·ä¸¾ nums ä¸­çš„æ¯ä¸ªæ•°å­—
void backtrack(int[] nums, int index) {
    // base case
    if (index == nums.length) {
        return;
    }
    // ç©·ä¸¾æ¯ä¸ªæ¡¶
    for (int i = 0; i < bucket.length; i++) {
        // é€‰æ‹©è£…è¿›ç¬¬ i ä¸ªæ¡¶
        bucket[i] += nums[index];
        // é€’å½’ç©·ä¸¾ä¸‹ä¸€ä¸ªæ•°å­—çš„é€‰æ‹©
        backtrack(nums, index + 1);
        // æ’¤é”€é€‰æ‹©
        bucket[i] -= nums[index];
    }
}
```

è™½ç„¶ä¸Šè¿°ä»£ç ä»…ä»…æ˜¯ç©·ä¸¾é€»è¾‘ï¼Œè¿˜ä¸èƒ½è§£å†³æˆ‘ä»¬çš„é—®é¢˜ï¼Œä½†æ˜¯åªè¦ç•¥åŠ å®Œå–„å³å¯ï¼š

```java
// ä¸»å‡½æ•°
boolean canPartitionKSubsets(int[] nums, int k) {
    // æ’é™¤ä¸€äº›åŸºæœ¬æƒ…å†µ
    if (k > nums.length) return false;
    int sum = 0;
    for (int v : nums) sum += v;
    if (sum % k != 0) return false;

    // k ä¸ªæ¡¶ï¼ˆé›†åˆï¼‰ï¼Œè®°å½•æ¯ä¸ªæ¡¶è£…çš„æ•°å­—ä¹‹å’Œ
    int[] bucket = new int[k];
    // ç†è®ºä¸Šæ¯ä¸ªæ¡¶ï¼ˆé›†åˆï¼‰ä¸­æ•°å­—çš„å’Œ
    int target = sum / k;
    // ç©·ä¸¾ï¼Œçœ‹çœ‹ nums æ˜¯å¦èƒ½åˆ’åˆ†æˆ k ä¸ªå’Œä¸º target çš„å­é›†
    return backtrack(nums, 0, bucket, target);
}

// é€’å½’ç©·ä¸¾ nums ä¸­çš„æ¯ä¸ªæ•°å­—
boolean backtrack(
    int[] nums, int index, int[] bucket, int target) {

    if (index == nums.length) {
        // æ£€æŸ¥æ‰€æœ‰æ¡¶çš„æ•°å­—ä¹‹å’Œæ˜¯å¦éƒ½æ˜¯ target
        for (int i = 0; i < bucket.length; i++) {
            if (bucket[i] != target) {
                return false;
            }
        }
        // nums æˆåŠŸå¹³åˆ†æˆ k ä¸ªå­é›†
        return true;
    }
    
    // ç©·ä¸¾ nums[index] å¯èƒ½è£…å…¥çš„æ¡¶
    for (int i = 0; i < bucket.length; i++) {
        // å‰ªæï¼Œæ¡¶è£…è£…æ»¡äº†
        if (bucket[i] + nums[index] > target) {
            continue;
        }
        // å°† nums[index] è£…å…¥ bucket[i]
        bucket[i] += nums[index];


        // é€’å½’ç©·ä¸¾ä¸‹ä¸€ä¸ªæ•°å­—çš„é€‰æ‹©
        if (backtrack(nums, index + 1, bucket, target)) {
            return true;
        }
        // æ’¤é”€é€‰æ‹©
        bucket[i] -= nums[index];
    }

    // nums[index] è£…å…¥å“ªä¸ªæ¡¶éƒ½ä¸è¡Œ
    return false;
}
```

æœ‰ä¹‹å‰çš„é“ºå«ï¼Œç›¸ä¿¡è¿™æ®µä»£ç æ˜¯æ¯”è¾ƒå®¹æ˜“ç†è§£çš„ï¼Œå…¶å®æˆ‘ä»¬å¯ä»¥å†åšä¸€ä¸ªä¼˜åŒ–ã€‚

ä¸»è¦çœ‹ `backtrack` å‡½æ•°çš„é€’å½’éƒ¨åˆ†ï¼š

```java
for (int i = 0; i < bucket.length; i++) {
    // å‰ªæ
    if (bucket[i] + nums[index] > target) {
        continue;
    }

    if (backtrack(nums, index + 1, bucket, target)) {
        return true;
    }
}
```

**å¦‚æœæˆ‘ä»¬è®©å°½å¯èƒ½å¤šçš„æƒ…å†µå‘½ä¸­å‰ªæçš„é‚£ä¸ª if åˆ†æ”¯ï¼Œå°±å¯ä»¥å‡å°‘é€’å½’è°ƒç”¨çš„æ¬¡æ•°ï¼Œä¸€å®šç¨‹åº¦ä¸Šå‡å°‘æ—¶é—´å¤æ‚åº¦**ã€‚

å¦‚ä½•å°½å¯èƒ½å¤šçš„å‘½ä¸­è¿™ä¸ª if åˆ†æ”¯å‘¢ï¼Ÿè¦çŸ¥é“æˆ‘ä»¬çš„ `index` å‚æ•°æ˜¯ä» 0 å¼€å§‹é€’å¢çš„ï¼Œä¹Ÿå°±æ˜¯é€’å½’åœ°ä» 0 å¼€å§‹éå† `nums` æ•°ç»„ã€‚

å¦‚æœæˆ‘ä»¬æå‰å¯¹ `nums` æ•°ç»„æ’åºï¼ŒæŠŠå¤§çš„æ•°å­—æ’åœ¨å‰é¢ï¼Œé‚£ä¹ˆå¤§çš„æ•°å­—ä¼šå…ˆè¢«åˆ†é…åˆ° `bucket` ä¸­ï¼Œå¯¹äºä¹‹åçš„æ•°å­—ï¼Œ`bucket[i] + nums[index]` ä¼šæ›´å¤§ï¼Œæ›´å®¹æ˜“è§¦å‘å‰ªæçš„ if æ¡ä»¶ã€‚

æ‰€ä»¥å¯ä»¥åœ¨ä¹‹å‰çš„ä»£ç ä¸­å†æ·»åŠ ä¸€äº›ä»£ç ï¼š

```java
boolean canPartitionKSubsets(int[] nums, int k) {
    // å…¶ä»–ä»£ç ä¸å˜
    // ...
    /* é™åºæ’åº nums æ•°ç»„ */
    Arrays.sort(nums);
    for (i = 0, j = nums.length - 1; i < j; i++, j--) {
        // äº¤æ¢ nums[i] å’Œ nums[j]
        int temp = nums[i];
        nums[i] = nums[j];
        nums[j] = temp;
    }
    /*******************/
    return backtrack(nums, 0, bucket, target);
}
```

ç”±äº Java çš„è¯­è¨€ç‰¹æ€§ï¼Œè¿™æ®µä»£ç é€šè¿‡å…ˆå‡åºæ’åºå†åè½¬ï¼Œè¾¾åˆ°é™åºæ’åˆ—çš„ç›®çš„ã€‚

è¿™ä¸ªè§£æ³•å¯ä»¥å¾—åˆ°æ­£ç¡®ç­”æ¡ˆï¼Œä½†è€—æ—¶æ¯”è¾ƒå¤šï¼Œå·²ç»æ— æ³•é€šè¿‡æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹äº†ï¼Œæ¥ä¸‹æ¥çœ‹çœ‹å¦ä¸€ç§è§†è§’çš„è§£æ³•ã€‚

### ä¸‰ã€ä»¥æ¡¶çš„è§†è§’

æ–‡ç« å¼€å¤´è¯´äº†ï¼Œ**ä»¥æ¡¶çš„è§†è§’è¿›è¡Œç©·ä¸¾ï¼Œæ¯ä¸ªæ¡¶éœ€è¦éå† `nums` ä¸­çš„æ‰€æœ‰æ•°å­—ï¼Œå†³å®šæ˜¯å¦æŠŠå½“å‰æ•°å­—è£…è¿›æ¡¶ä¸­ï¼›å½“è£…æ»¡ä¸€ä¸ªæ¡¶ä¹‹åï¼Œè¿˜è¦è£…ä¸‹ä¸€ä¸ªæ¡¶ï¼Œç›´åˆ°æ‰€æœ‰æ¡¶éƒ½è£…æ»¡ä¸ºæ­¢**ã€‚

è¿™ä¸ªæ€è·¯å¯ä»¥ç”¨ä¸‹é¢è¿™æ®µä»£ç è¡¨ç¤ºå‡ºæ¥ï¼š

```java
// è£…æ»¡æ‰€æœ‰æ¡¶ä¸ºæ­¢
while (k > 0) {
    // è®°å½•å½“å‰æ¡¶ä¸­çš„æ•°å­—ä¹‹å’Œ
    int bucket = 0;
    for (int i = 0; i < nums.length; i++) {
        // å†³å®šæ˜¯å¦å°† nums[i] æ”¾å…¥å½“å‰æ¡¶ä¸­
        if (canAdd(bucket, num[i])) {
            bucket += nums[i];
        }
        if (bucket == target) {
            // è£…æ»¡äº†ä¸€ä¸ªæ¡¶ï¼Œè£…ä¸‹ä¸€ä¸ªæ¡¶
            k--;
            break;
        }
    }
}
```

é‚£ä¹ˆæˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠè¿™ä¸ª while å¾ªç¯æ”¹å†™æˆé€’å½’å‡½æ•°ï¼Œä¸è¿‡æ¯”åˆšæ‰ç•¥å¾®å¤æ‚ä¸€äº›ï¼Œé¦–å…ˆå†™ä¸€ä¸ª `backtrack` é€’å½’å‡½æ•°å‡ºæ¥ï¼š

```java
boolean backtrack(int k, int bucket, 
    int[] nums, int start, boolean[] used, int target);
```

ä¸è¦è¢«è¿™ä¹ˆå¤šå‚æ•°å“åˆ°ï¼Œæˆ‘ä¼šä¸€ä¸ªä¸ªè§£é‡Šè¿™äº›å‚æ•°ã€‚**å¦‚æœä½ èƒ½å¤Ÿé€å½»ç†è§£æœ¬æ–‡ï¼Œä¹Ÿèƒ½å¾—å¿ƒåº”æ‰‹åœ°å†™å‡ºè¿™æ ·çš„å›æº¯å‡½æ•°**ã€‚

è¿™ä¸ª `backtrack` å‡½æ•°çš„å‚æ•°å¯ä»¥è¿™æ ·è§£é‡Šï¼š

ç°åœ¨ `k` å·æ¡¶æ­£åœ¨æ€è€ƒæ˜¯å¦åº”è¯¥æŠŠ `nums[start]` è¿™ä¸ªå…ƒç´ è£…è¿›æ¥ï¼›ç›®å‰ `k` å·æ¡¶é‡Œé¢å·²ç»è£…çš„æ•°å­—ä¹‹å’Œä¸º `bucket`ï¼›`used` æ ‡å¿—æŸä¸€ä¸ªå…ƒç´ æ˜¯å¦å·²ç»è¢«è£…åˆ°æ¡¶ä¸­ï¼›`target` æ˜¯æ¯ä¸ªæ¡¶éœ€è¦è¾¾æˆçš„ç›®æ ‡å’Œã€‚

æ ¹æ®è¿™ä¸ªå‡½æ•°å®šä¹‰ï¼Œå¯ä»¥è¿™æ ·è°ƒç”¨ `backtrack` å‡½æ•°ï¼š

```java
boolean canPartitionKSubsets(int[] nums, int k) {
    // æ’é™¤ä¸€äº›åŸºæœ¬æƒ…å†µ
    if (k > nums.length) return false;
    int sum = 0;
    for (int v : nums) sum += v;
    if (sum % k != 0) return false;
    
    boolean[] used = new boolean[nums.length];
    int target = sum / k;
    // k å·æ¡¶åˆå§‹ä»€ä¹ˆéƒ½æ²¡è£…ï¼Œä» nums[0] å¼€å§‹åšé€‰æ‹©
    return backtrack(k, 0, nums, 0, used, target);
}
```

å®ç° `backtrack` å‡½æ•°çš„é€»è¾‘ä¹‹å‰ï¼Œå†é‡å¤ä¸€éï¼Œä»æ¡¶çš„è§†è§’ï¼š

1ã€éœ€è¦éå† `nums` ä¸­æ‰€æœ‰æ•°å­—ï¼Œå†³å®šå“ªäº›æ•°å­—éœ€è¦è£…åˆ°å½“å‰æ¡¶ä¸­ã€‚

2ã€å¦‚æœå½“å‰æ¡¶è£…æ»¡äº†ï¼ˆæ¡¶å†…æ•°å­—å’Œè¾¾åˆ° `target`ï¼‰ï¼Œåˆ™è®©ä¸‹ä¸€ä¸ªæ¡¶å¼€å§‹æ‰§è¡Œç¬¬ 1 æ­¥ã€‚

ä¸‹é¢çš„ä»£ç å°±å®ç°äº†è¿™ä¸ªé€»è¾‘ï¼š

```java
boolean backtrack(int k, int bucket, 
    int[] nums, int start, boolean[] used, int target) {
    // base case
    if (k == 0) {
        // æ‰€æœ‰æ¡¶éƒ½è¢«è£…æ»¡äº†ï¼Œè€Œä¸” nums ä¸€å®šå…¨éƒ¨ç”¨å®Œäº†
        // å› ä¸º target == sum / k
        return true;
    }
    if (bucket == target) {


        // è£…æ»¡äº†å½“å‰æ¡¶ï¼Œé€’å½’ç©·ä¸¾ä¸‹ä¸€ä¸ªæ¡¶çš„é€‰æ‹©
        // è®©ä¸‹ä¸€ä¸ªæ¡¶ä» nums[0] å¼€å§‹é€‰æ•°å­—
        return backtrack(k - 1, 0 ,nums, 0, used, target);
    }

    // ä» start å¼€å§‹å‘åæ¢æŸ¥æœ‰æ•ˆçš„ nums[i] è£…å…¥å½“å‰æ¡¶
    for (int i = start; i < nums.length; i++) {
        // å‰ªæ
        if (used[i]) {
            // nums[i] å·²ç»è¢«è£…å…¥åˆ«çš„æ¡¶ä¸­
            continue;
        }
        if (nums[i] + bucket > target) {
            // å½“å‰æ¡¶è£…ä¸ä¸‹ nums[i]
            continue;
        }
        // åšé€‰æ‹©ï¼Œå°† nums[i] è£…å…¥å½“å‰æ¡¶ä¸­
        used[i] = true;
        bucket += nums[i];
        // é€’å½’ç©·ä¸¾ä¸‹ä¸€ä¸ªæ•°å­—æ˜¯å¦è£…å…¥å½“å‰æ¡¶
        if (backtrack(k, bucket, nums, i + 1, used, target)) {
            return true;
        }
        // æ’¤é”€é€‰æ‹©
        used[i] = false;
        bucket -= nums[i];
    }
    // ç©·ä¸¾äº†æ‰€æœ‰æ•°å­—ï¼Œéƒ½æ— æ³•è£…æ»¡å½“å‰æ¡¶
    return false;
}
```

**è¿™æ®µä»£ç æ˜¯å¯ä»¥å¾—å‡ºæ­£ç¡®ç­”æ¡ˆçš„ï¼Œä½†æ˜¯æ•ˆç‡å¾ˆä½ï¼Œæˆ‘ä»¬å¯ä»¥æ€è€ƒä¸€ä¸‹æ˜¯å¦è¿˜æœ‰ä¼˜åŒ–çš„ç©ºé—´**ã€‚

é¦–å…ˆï¼Œåœ¨è¿™ä¸ªè§£æ³•ä¸­æ¯ä¸ªæ¡¶éƒ½å¯ä»¥è®¤ä¸ºæ˜¯æ²¡æœ‰å·®å¼‚çš„ï¼Œä½†æ˜¯æˆ‘ä»¬çš„å›æº¯ç®—æ³•å´ä¼šå¯¹å®ƒä»¬åŒºåˆ«å¯¹å¾…ï¼Œè¿™é‡Œå°±ä¼šå‡ºç°é‡å¤è®¡ç®—çš„æƒ…å†µã€‚

ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæˆ‘ä»¬çš„å›æº¯ç®—æ³•ï¼Œè¯´åˆ°åº•å°±æ˜¯ç©·ä¸¾æ‰€æœ‰å¯èƒ½çš„ç»„åˆï¼Œç„¶åçœ‹æ˜¯å¦èƒ½æ‰¾å‡ºå’Œä¸º `target` çš„ `k` ä¸ªæ¡¶ï¼ˆå­é›†ï¼‰ã€‚

é‚£ä¹ˆï¼Œæ¯”å¦‚ä¸‹é¢è¿™ç§æƒ…å†µï¼Œ`target = 5`ï¼Œç®—æ³•ä¼šåœ¨ç¬¬ä¸€ä¸ªæ¡¶é‡Œé¢è£… `1, 4`ï¼š

[![img](https://labuladong.github.io/algo/images/%e9%9b%86%e5%90%88%e5%88%92%e5%88%86/1.jpeg)](https://labuladong.github.io/algo/images/é›†åˆåˆ’åˆ†/1.jpeg)

ç°åœ¨ç¬¬ä¸€ä¸ªæ¡¶è£…æ»¡äº†ï¼Œå°±å¼€å§‹è£…ç¬¬äºŒä¸ªæ¡¶ï¼Œç®—æ³•ä¼šè£…å…¥ `2, 3`ï¼š

[![img](https://labuladong.github.io/algo/images/%e9%9b%86%e5%90%88%e5%88%92%e5%88%86/2.jpeg)](https://labuladong.github.io/algo/images/é›†åˆåˆ’åˆ†/2.jpeg)

ç„¶åä»¥æ­¤ç±»æ¨ï¼Œå¯¹åé¢çš„å…ƒç´ è¿›è¡Œç©·ä¸¾ï¼Œå‡‘å‡ºè‹¥å¹²ä¸ªå’Œä¸º 5 çš„æ¡¶ï¼ˆå­é›†ï¼‰ã€‚

ä½†é—®é¢˜æ˜¯ï¼Œå¦‚æœæœ€åå‘ç°æ— æ³•å‡‘å‡ºå’Œä¸º `target` çš„ `k` ä¸ªå­é›†ï¼Œç®—æ³•ä¼šæ€ä¹ˆåšï¼Ÿ

å›æº¯ç®—æ³•ä¼šå›æº¯åˆ°ç¬¬ä¸€ä¸ªæ¡¶ï¼Œé‡æ–°å¼€å§‹ç©·ä¸¾ï¼Œç°åœ¨å®ƒçŸ¥é“ç¬¬ä¸€ä¸ªæ¡¶é‡Œè£… `1, 4` æ˜¯ä¸å¯è¡Œçš„ï¼Œå®ƒä¼šå°è¯•æŠŠ `2, 3` è£…åˆ°ç¬¬ä¸€ä¸ªæ¡¶é‡Œï¼š

[![img](https://labuladong.github.io/algo/images/%e9%9b%86%e5%90%88%e5%88%92%e5%88%86/3.jpeg)](https://labuladong.github.io/algo/images/é›†åˆåˆ’åˆ†/3.jpeg)

ç°åœ¨ç¬¬ä¸€ä¸ªæ¡¶è£…æ»¡äº†ï¼Œå°±å¼€å§‹è£…ç¬¬äºŒä¸ªæ¡¶ï¼Œç®—æ³•ä¼šè£…å…¥ `1, 4`ï¼š

[![img](https://labuladong.github.io/algo/images/%e9%9b%86%e5%90%88%e5%88%92%e5%88%86/4.jpeg)](https://labuladong.github.io/algo/images/é›†åˆåˆ’åˆ†/4.jpeg)

å¥½ï¼Œåˆ°è¿™é‡Œä½ åº”è¯¥çœ‹å‡ºæ¥é—®é¢˜äº†ï¼Œè¿™ç§æƒ…å†µå…¶å®å’Œä¹‹å‰çš„é‚£ç§æƒ…å†µæ˜¯ä¸€æ ·çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåˆ°è¿™é‡Œä½ å…¶å®å·²ç»çŸ¥é“ä¸éœ€è¦å†ç©·ä¸¾äº†ï¼Œå¿…ç„¶å‡‘ä¸å‡ºæ¥å’Œä¸º `target` çš„ `k` ä¸ªå­é›†ã€‚

ä½†æˆ‘ä»¬çš„ç®—æ³•è¿˜æ˜¯ä¼šå‚»ä¹ä¹åœ°ç»§ç»­ç©·ä¸¾ï¼Œå› ä¸ºåœ¨å¥¹çœ‹æ¥ï¼Œç¬¬ä¸€ä¸ªæ¡¶å’Œç¬¬äºŒä¸ªæ¡¶é‡Œé¢è£…çš„å…ƒç´ ä¸ä¸€æ ·ï¼Œé‚£è¿™å°±æ˜¯ä¸¤ç§ä¸ä¸€æ ·çš„æƒ…å†µå‘€ã€‚

é‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆè®©ç®—æ³•çš„æ™ºå•†æé«˜ï¼Œè¯†åˆ«å‡ºè¿™ç§æƒ…å†µï¼Œé¿å…å†—ä½™è®¡ç®—å‘¢ï¼Ÿ

ä½ æ³¨æ„è¿™ä¸¤ç§æƒ…å†µçš„ `used` æ•°ç»„è‚¯å®šé•¿å¾—ä¸€æ ·ï¼Œæ‰€ä»¥ `used` æ•°ç»„å¯ä»¥è®¤ä¸ºæ˜¯å›æº¯è¿‡ç¨‹ä¸­çš„ã€ŒçŠ¶æ€ã€ã€‚

**æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ª `memo` å¤‡å¿˜å½•ï¼Œåœ¨è£…æ»¡ä¸€ä¸ªæ¡¶æ—¶è®°å½•å½“å‰ `used` çš„çŠ¶æ€ï¼Œå¦‚æœå½“å‰ `used` çš„çŠ¶æ€æ˜¯æ›¾ç»å‡ºç°è¿‡çš„ï¼Œé‚£å°±ä¸ç”¨å†ç»§ç»­ç©·ä¸¾ï¼Œä»è€Œèµ·åˆ°å‰ªæé¿å…å†—ä½™è®¡ç®—çš„ä½œç”¨**ã€‚

æœ‰è¯»è€…è‚¯å®šä¼šé—®ï¼Œ`used` æ˜¯ä¸€ä¸ªå¸ƒå°”æ•°ç»„ï¼Œæ€ä¹ˆä½œä¸ºé”®è¿›è¡Œå­˜å‚¨å‘¢ï¼Ÿè¿™å…¶å®æ˜¯å°é—®é¢˜ï¼Œæ¯”å¦‚æˆ‘ä»¬å¯ä»¥æŠŠæ•°ç»„è½¬åŒ–æˆå­—ç¬¦ä¸²ï¼Œè¿™æ ·å°±å¯ä»¥ä½œä¸ºå“ˆå¸Œè¡¨çš„é”®è¿›è¡Œå­˜å‚¨äº†ã€‚

çœ‹ä¸‹ä»£ç å®ç°ï¼Œåªè¦ç¨å¾®æ”¹ä¸€ä¸‹ `backtrack` å‡½æ•°å³å¯ï¼š

```java
// å¤‡å¿˜å½•ï¼Œå­˜å‚¨ used æ•°ç»„çš„çŠ¶æ€
HashMap<String, Boolean> memo = new HashMap<>();

boolean backtrack(int k, int bucket, int[] nums, int start, boolean[] used, int target) {        
    // base case
    if (k == 0) {
        return true;
    }
    // å°† used çš„çŠ¶æ€è½¬åŒ–æˆå½¢å¦‚ [true, false, ...] çš„å­—ç¬¦ä¸²
    // ä¾¿äºå­˜å…¥ HashMap
    String state = Arrays.toString(used);

    if (bucket == target) {
        // è£…æ»¡äº†å½“å‰æ¡¶ï¼Œé€’å½’ç©·ä¸¾ä¸‹ä¸€ä¸ªæ¡¶çš„é€‰æ‹©
        boolean res = backtrack(k - 1, 0, nums, 0, used, target);
        // å°†å½“å‰çŠ¶æ€å’Œç»“æœå­˜å…¥å¤‡å¿˜å½•
        memo.put(state, res);
        return res;
    }
    
    if (memo.containsKey(state)) {
        // å¦‚æœå½“å‰çŠ¶æ€æ›¾ä»Šè®¡ç®—è¿‡ï¼Œå°±ç›´æ¥è¿”å›ï¼Œä¸è¦å†é€’å½’ç©·ä¸¾äº†
        return memo.get(state);
    }

    // å…¶ä»–é€»è¾‘ä¸å˜...
}
```

è¿™æ ·æäº¤è§£æ³•ï¼Œå‘ç°æ‰§è¡Œæ•ˆç‡ä¾ç„¶æ¯”è¾ƒä½ï¼Œè¿™æ¬¡ä¸æ˜¯å› ä¸ºç®—æ³•é€»è¾‘ä¸Šçš„å†—ä½™è®¡ç®—ï¼Œè€Œæ˜¯ä»£ç å®ç°ä¸Šçš„é—®é¢˜ã€‚

**å› ä¸ºæ¯æ¬¡é€’å½’éƒ½è¦æŠŠ `used` æ•°ç»„è½¬åŒ–æˆå­—ç¬¦ä¸²ï¼Œè¿™å¯¹äºç¼–ç¨‹è¯­è¨€æ¥è¯´ä¹Ÿæ˜¯ä¸€ä¸ªä¸å°çš„æ¶ˆè€—ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–**ã€‚

æ³¨æ„é¢˜ç›®ç»™çš„æ•°æ®è§„æ¨¡ `nums.length <= 16`ï¼Œä¹Ÿå°±æ˜¯è¯´ `used` æ•°ç»„æœ€å¤šä¹Ÿä¸ä¼šè¶…è¿‡ 16ï¼Œé‚£ä¹ˆæˆ‘ä»¬å®Œå…¨å¯ä»¥ç”¨ã€Œä½å›¾ã€çš„æŠ€å·§ï¼Œç”¨ä¸€ä¸ª int ç±»å‹çš„ `used` å˜é‡æ¥æ›¿ä»£ `used` æ•°ç»„ã€‚

å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ•´æ•° `used` çš„ç¬¬ `i` ä½ï¼ˆ`(used >> i) & 1`ï¼‰çš„ 1/0 æ¥è¡¨ç¤º `used[i]` çš„ true/falseã€‚

è¿™æ ·ä¸€æ¥ï¼Œä¸ä»…èŠ‚çº¦äº†ç©ºé—´ï¼Œè€Œä¸”æ•´æ•° `used` ä¹Ÿå¯ä»¥ç›´æ¥ä½œä¸ºé”®å­˜å…¥ HashMapï¼Œçœå»æ•°ç»„è½¬å­—ç¬¦ä¸²çš„æ¶ˆè€—ã€‚

çœ‹ä¸‹æœ€ç»ˆçš„è§£æ³•ä»£ç ï¼š

```java
public boolean canPartitionKSubsets(int[] nums, int k) {
    // æ’é™¤ä¸€äº›åŸºæœ¬æƒ…å†µ
    if (k > nums.length) return false;
    int sum = 0;
    for (int v : nums) sum += v;
    if (sum % k != 0) return false;
    
    int used = 0; // ä½¿ç”¨ä½å›¾æŠ€å·§
    int target = sum / k;
    // k å·æ¡¶åˆå§‹ä»€ä¹ˆéƒ½æ²¡è£…ï¼Œä» nums[0] å¼€å§‹åšé€‰æ‹©
    return backtrack(k, 0, nums, 0, used, target);
}

HashMap<Integer, Boolean> memo = new HashMap<>();

boolean backtrack(int k, int bucket,
                  int[] nums, int start, int used, int target) {        
    // base case
    if (k == 0) {
        // æ‰€æœ‰æ¡¶éƒ½è¢«è£…æ»¡äº†ï¼Œè€Œä¸” nums ä¸€å®šå…¨éƒ¨ç”¨å®Œäº†
        return true;
    }
    if (bucket == target) {
        // è£…æ»¡äº†å½“å‰æ¡¶ï¼Œé€’å½’ç©·ä¸¾ä¸‹ä¸€ä¸ªæ¡¶çš„é€‰æ‹©
        // è®©ä¸‹ä¸€ä¸ªæ¡¶ä» nums[0] å¼€å§‹é€‰æ•°å­—
        boolean res = backtrack(k - 1, 0, nums, 0, used, target);
        // ç¼“å­˜ç»“æœ
        memo.put(used, res);
        return res;
    }
    
    if (memo.containsKey(used)) {
        // é¿å…å†—ä½™è®¡ç®—
        return memo.get(used);
    }

    for (int i = start; i < nums.length; i++) {
        // å‰ªæ
        if (((used >> i) & 1) == 1) { // åˆ¤æ–­ç¬¬ i ä½æ˜¯å¦æ˜¯ 1
            // nums[i] å·²ç»è¢«è£…å…¥åˆ«çš„æ¡¶ä¸­
            continue;
        }
        if (nums[i] + bucket > target) {
            continue;
        }
        // åšé€‰æ‹©
        used |= 1 << i; // å°†ç¬¬ i ä½ç½®ä¸º 1
        bucket += nums[i];
        // é€’å½’ç©·ä¸¾ä¸‹ä¸€ä¸ªæ•°å­—æ˜¯å¦è£…å…¥å½“å‰æ¡¶
        if (backtrack(k, bucket, nums, i + 1, used, target)) {
            return true;
        }
        // æ’¤é”€é€‰æ‹©
        used ^= 1 << i; // ä½¿ç”¨å¼‚æˆ–è¿ç®—å°†ç¬¬ i ä½æ¢å¤ 0
        bucket -= nums[i];
    }

    return false;
}
```

è‡³æ­¤ï¼Œè¿™é“é¢˜çš„ç¬¬äºŒç§æ€è·¯ä¹Ÿå®Œæˆäº†ã€‚

### å››ã€æœ€åæ€»ç»“

æœ¬æ–‡å†™çš„è¿™ä¸¤ç§æ€è·¯éƒ½å¯ä»¥ç®—å‡ºæ­£ç¡®ç­”æ¡ˆï¼Œä¸è¿‡ç¬¬ä¸€ç§è§£æ³•å³ä¾¿ç»è¿‡äº†æ’åºä¼˜åŒ–ï¼Œä¹Ÿæ˜æ˜¾æ¯”ç¬¬äºŒç§è§£æ³•æ…¢å¾ˆå¤šï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ

æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹è¿™ä¸¤ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ï¼Œå‡è®¾ `nums` ä¸­çš„å…ƒç´ ä¸ªæ•°ä¸º `n`ã€‚

å…ˆè¯´ç¬¬ä¸€ä¸ªè§£æ³•ï¼Œä¹Ÿå°±æ˜¯ä»æ•°å­—çš„è§’åº¦è¿›è¡Œç©·ä¸¾ï¼Œ`n` ä¸ªæ•°å­—ï¼Œæ¯ä¸ªæ•°å­—æœ‰ `k` ä¸ªæ¡¶å¯ä¾›é€‰æ‹©ï¼Œæ‰€ä»¥ç»„åˆå‡ºçš„ç»“æœä¸ªæ•°ä¸º `k^n`ï¼Œæ—¶é—´å¤æ‚åº¦ä¹Ÿå°±æ˜¯ `O(k^n)`ã€‚

ç¬¬äºŒä¸ªè§£æ³•ï¼Œæ¯ä¸ªæ¡¶è¦éå† `n` ä¸ªæ•°å­—ï¼Œå¯¹æ¯ä¸ªæ•°å­—æœ‰ã€Œè£…å…¥ã€æˆ–ã€Œä¸è£…å…¥ã€ä¸¤ç§é€‰æ‹©ï¼Œæ‰€ä»¥ç»„åˆçš„ç»“æœæœ‰ `2^n` ç§ï¼›è€Œæˆ‘ä»¬æœ‰ `k` ä¸ªæ¡¶ï¼Œæ‰€ä»¥æ€»çš„æ—¶é—´å¤æ‚åº¦ä¸º `O(k*2^n)`ã€‚

**å½“ç„¶ï¼Œè¿™æ˜¯å¯¹æœ€åå¤æ‚åº¦ä¸Šç•Œçš„ç²—ç•¥ä¼°ç®—ï¼Œå®é™…çš„å¤æ‚åº¦è‚¯å®šè¦å¥½å¾ˆå¤šï¼Œæ¯•ç«Ÿæˆ‘ä»¬æ·»åŠ äº†è¿™ä¹ˆå¤šå‰ªæé€»è¾‘**ã€‚ä¸è¿‡ï¼Œä»å¤æ‚åº¦çš„ä¸Šç•Œå·²ç»å¯ä»¥çœ‹å‡ºç¬¬ä¸€ç§æ€è·¯è¦æ…¢å¾ˆå¤šäº†ã€‚

æ‰€ä»¥ï¼Œè°è¯´å›æº¯ç®—æ³•æ²¡æœ‰æŠ€å·§æ€§çš„ï¼Ÿè™½ç„¶å›æº¯ç®—æ³•å°±æ˜¯æš´åŠ›ç©·ä¸¾ï¼Œä½†ç©·ä¸¾ä¹Ÿåˆ†èªæ˜çš„ç©·ä¸¾æ–¹å¼å’Œä½æ•ˆçš„ç©·ä¸¾æ–¹å¼ï¼Œå…³é”®çœ‹ä½ ä»¥è°çš„ã€Œè§†è§’ã€è¿›è¡Œç©·ä¸¾ã€‚

é€šä¿—æ¥è¯´ï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡ã€Œå°‘é‡å¤šæ¬¡ã€ï¼Œå°±æ˜¯è¯´å®å¯å¤šåšå‡ æ¬¡é€‰æ‹©ï¼ˆä¹˜æ³•å…³ç³»ï¼‰ï¼Œä¹Ÿä¸è¦ç»™å¤ªå¤§çš„é€‰æ‹©ç©ºé—´ï¼ˆæŒ‡æ•°å…³ç³»ï¼‰ï¼›åš `n` æ¬¡ã€Œ`k` é€‰ä¸€ã€ä»…é‡å¤ä¸€æ¬¡ï¼ˆ`O(k^n)`ï¼‰ï¼Œæ¯” `n` æ¬¡ã€ŒäºŒé€‰ä¸€ã€é‡å¤ `k` æ¬¡ï¼ˆ`O(k*2^n)`ï¼‰æ•ˆç‡ä½å¾ˆå¤šã€‚

å¥½äº†ï¼Œè¿™é“é¢˜æˆ‘ä»¬ä»ä¸¤ç§è§†è§’è¿›è¡Œç©·ä¸¾ï¼Œè™½ç„¶ä»£ç é‡çœ‹èµ·æ¥å¤šï¼Œä½†æ ¸å¿ƒé€»è¾‘éƒ½æ˜¯ç±»ä¼¼çš„ï¼Œç›¸ä¿¡ä½ é€šè¿‡æœ¬æ–‡èƒ½å¤Ÿæ›´æ·±åˆ»åœ°ç†è§£å›æº¯ç®—æ³•ã€‚

> æ–‡ä¸­æ€è€ƒé¢˜ç­”æ¡ˆï¼šä¸ºä»€ä¹ˆåˆ’åˆ†ä¸¤ä¸ªç›¸ç­‰çš„å­é›†å¯ä»¥è½¬åŒ–æˆèƒŒåŒ…é—®é¢˜ï¼Ÿ

> [0-1 èƒŒåŒ…é—®é¢˜](https://labuladong.github.io/algo/di-er-zhan-a01c6/bei-bao-le-34bd4/jing-dian--8780f/) çš„åœºæ™¯ä¸­ï¼Œæœ‰ä¸€ä¸ªèƒŒåŒ…å’Œè‹¥å¹²ç‰©å“ï¼Œæ¯ä¸ªç‰©å“æœ‰**ä¸¤ä¸ªé€‰æ‹©**ï¼Œåˆ†åˆ«æ˜¯ã€Œè£…è¿›èƒŒåŒ…ã€å’Œã€Œä¸è£…è¿›èƒŒåŒ…ã€ã€‚æŠŠåŸé›†åˆ `S` åˆ’åˆ†æˆä¸¤ä¸ªç›¸ç­‰å­é›† `S_1, S_2` çš„åœºæ™¯ä¸‹ï¼Œ`S` ä¸­çš„æ¯ä¸ªå…ƒç´ ä¹Ÿæœ‰**ä¸¤ä¸ªé€‰æ‹©**ï¼Œåˆ†åˆ«æ˜¯ã€Œè£…è¿› `S_1`ã€å’Œã€Œä¸è£…è¿› `S_1`ï¼ˆè£…è¿› `S_2`ï¼‰ã€ï¼Œè¿™æ—¶å€™çš„ç©·ä¸¾æ€è·¯å…¶å®å’ŒèƒŒåŒ…é—®é¢˜ç›¸åŒã€‚

> ä½†å¦‚æœä½ æƒ³æŠŠ `S` åˆ’åˆ†æˆ `k` ä¸ªç›¸ç­‰çš„å­é›†ï¼Œç›¸å½“äº `S` ä¸­çš„æ¯ä¸ªå…ƒç´ æœ‰ **`k` ä¸ªé€‰æ‹©**ï¼Œè¿™å’Œæ ‡å‡†èƒŒåŒ…é—®é¢˜çš„åœºæ™¯æœ‰æœ¬è´¨åŒºåˆ«ï¼Œæ˜¯æ— æ³•å¥—ç”¨èƒŒåŒ…é—®é¢˜çš„è§£é¢˜æ€è·¯çš„ã€‚